<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Module 9 Loops and conditionals | Tools for Analytics (TFA)</title>
  <meta name="description" content="Course notes for the ‘Tools for Analytics’ course" />
  <meta name="generator" content="bookdown 0.27 and GitBook 2.6.7" />

  <meta property="og:title" content="Module 9 Loops and conditionals | Tools for Analytics (TFA)" />
  <meta property="og:type" content="book" />
  <meta property="og:image" content="https://bss-osca.github.io/tfa//assets/logo.png" />
  <meta property="og:description" content="Course notes for the ‘Tools for Analytics’ course" />
  <meta name="github-repo" content="bss-osca/tfa" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Module 9 Loops and conditionals | Tools for Analytics (TFA)" />
  
  <meta name="twitter:description" content="Course notes for the ‘Tools for Analytics’ course" />
  <meta name="twitter:image" content="https://bss-osca.github.io/tfa//assets/logo.png" />

<meta name="author" content="Lars Relund Nielsen" />


<meta name="date" content="2022-09-09" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  <link rel="shortcut icon" href="assets/favicon.ico" type="image/x-icon" />
<link rel="prev" href="mod-r-workflow.html"/>
<link rel="next" href="mod-r-functions.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script>
<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script src="libs/htmlwidgets-1.5.4/htmlwidgets.js"></script>
<script src="libs/viz-1.8.2/viz.js"></script>
<link href="libs/DiagrammeR-styles-0.2/styles.css" rel="stylesheet" />
<script src="libs/grViz-binding-1.0.9/grViz.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />
<link href="libs/leaflet-1.3.1/leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-1.3.1/leaflet.js"></script>
<link href="libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet" />
<script src="libs/proj4-2.6.2/proj4.min.js"></script>
<script src="libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script>
<link href="libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-binding-2.1.1/leaflet.js"></script>
<script src="libs/leaflet-providers-1.9.0/leaflet-providers_1.9.0.js"></script>
<script src="libs/leaflet-providers-plugin-2.1.1/leaflet-providers-plugin.js"></script>
<link href="libs/minichart-0.2.2/minicharts.css" rel="stylesheet" />
<script src="libs/minichart-0.2.2/leaflet.minicharts.min.js"></script>
<link href="libs/font-awesome-4.7.0/css/font-awesome.min.css" rel="stylesheet" />
<link href="libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet" />
<script src="libs/datatables-binding-0.23/datatables.js"></script>
<link href="libs/dt-core-1.11.3/css/jquery.dataTables.min.css" rel="stylesheet" />
<link href="libs/dt-core-1.11.3/css/jquery.dataTables.extra.css" rel="stylesheet" />
<script src="libs/dt-core-1.11.3/js/jquery.dataTables.min.js"></script>
<link href="libs/nouislider-7.0.10/jquery.nouislider.min.css" rel="stylesheet" />
<script src="libs/nouislider-7.0.10/jquery.nouislider.min.js"></script>
<link href="libs/selectize-0.12.0/selectize.bootstrap3.css" rel="stylesheet" />
<script src="libs/selectize-0.12.0/selectize.min.js"></script>
<link href="libs/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet" />
<script src="libs/crosstalk-1.2.0/js/crosstalk.min.js"></script>
<html>
<head>
<script>
  $(document).ready(function() {

  // Section anchors
  $('.section h1, .section h2, .section h3, .section h4, .section h5').each(function() {
    anchor = '#' + $(this).parent().attr('id');
    $(this).addClass("hasAnchor").prepend('<a href="' + anchor + '" class="anchor"></a>');
  });
});
</script>
<script src="https://hypothes.is/embed.js" async></script>
<!-- Latest compiled and minified CSS -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<!-- Latest compiled and minified JavaScript -->
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
</head>
</html>


<style type="text/css">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="assets/style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="toc-logo"><a href="./"><img src="img/logo.png"></a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction to the course</a><ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#lo-intro"><i class="fa fa-check"></i><b>1.1</b> Learning outcomes</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#purpose"><i class="fa fa-check"></i><b>1.2</b> Purpose for the course</a></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#r-vs-vba"><i class="fa fa-check"></i><b>1.3</b> R vs Excel/VBA</a></li>
<li class="chapter" data-level="1.4" data-path="index.html"><a href="index.html#computer"><i class="fa fa-check"></i><b>1.4</b> How a computer works</a></li>
<li class="chapter" data-level="1.5" data-path="index.html"><a href="index.html#organization"><i class="fa fa-check"></i><b>1.5</b> How the notes are organized</a></li>
<li class="chapter" data-level="1.6" data-path="index.html"><a href="index.html#ack"><i class="fa fa-check"></i><b>1.6</b> Acknowledgements</a></li>
<li class="chapter" data-level="1.7" data-path="index.html"><a href="index.html#ex-intro"><i class="fa fa-check"></i><b>1.7</b> Exercises</a><ul>
<li class="chapter" data-level="1.7.1" data-path="index.html"><a href="index.html#ex-annotate"><i class="fa fa-check"></i><b>1.7.1</b> Exercise - How to annotate</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>I VBA</b></span></li>
<li class="chapter" data-level="2" data-path="mod-vba-intro.html"><a href="mod-vba-intro.html"><i class="fa fa-check"></i><b>2</b> An introduction to VBA</a><ul>
<li class="chapter" data-level="2.1" data-path="mod-vba-intro.html"><a href="mod-vba-intro.html#lo-vba-intro"><i class="fa fa-check"></i><b>2.1</b> Learning outcomes</a></li>
<li class="chapter" data-level="2.2" data-path="mod-vba-intro.html"><a href="mod-vba-intro.html#vba-what"><i class="fa fa-check"></i><b>2.2</b> What is VBA</a></li>
<li class="chapter" data-level="2.3" data-path="mod-vba-intro.html"><a href="mod-vba-intro.html#vba-setup"><i class="fa fa-check"></i><b>2.3</b> Setup Excel for VBA</a></li>
<li class="chapter" data-level="2.4" data-path="mod-vba-intro.html"><a href="mod-vba-intro.html#vba-hello"><i class="fa fa-check"></i><b>2.4</b> Your first program</a></li>
<li class="chapter" data-level="2.5" data-path="mod-vba-intro.html"><a href="mod-vba-intro.html#vba-macro"><i class="fa fa-check"></i><b>2.5</b> The macro recorder</a></li>
<li class="chapter" data-level="2.6" data-path="mod-vba-intro.html"><a href="mod-vba-intro.html#vba-overview"><i class="fa fa-check"></i><b>2.6</b> VBA - A short overview</a><ul>
<li class="chapter" data-level="2.6.1" data-path="mod-vba-intro.html"><a href="mod-vba-intro.html#variables"><i class="fa fa-check"></i><b>2.6.1</b> Variables</a></li>
<li class="chapter" data-level="2.6.2" data-path="mod-vba-intro.html"><a href="mod-vba-intro.html#procedures"><i class="fa fa-check"></i><b>2.6.2</b> Procedures</a></li>
<li class="chapter" data-level="2.6.3" data-path="mod-vba-intro.html"><a href="mod-vba-intro.html#input-and-output"><i class="fa fa-check"></i><b>2.6.3</b> Input and output</a></li>
<li class="chapter" data-level="2.6.4" data-path="mod-vba-intro.html"><a href="mod-vba-intro.html#conditional-statements"><i class="fa fa-check"></i><b>2.6.4</b> Conditional statements</a></li>
<li class="chapter" data-level="2.6.5" data-path="mod-vba-intro.html"><a href="mod-vba-intro.html#loops"><i class="fa fa-check"></i><b>2.6.5</b> Loops</a></li>
</ul></li>
<li class="chapter" data-level="2.7" data-path="mod-vba-intro.html"><a href="mod-vba-intro.html#vba-coding-practice"><i class="fa fa-check"></i><b>2.7</b> Good coding pratice</a></li>
<li class="chapter" data-level="2.8" data-path="mod-vba-intro.html"><a href="mod-vba-intro.html#rc-vba-intro"><i class="fa fa-check"></i><b>2.8</b> Recap</a></li>
<li class="chapter" data-level="2.9" data-path="mod-vba-intro.html"><a href="mod-vba-intro.html#ex-vba-intro"><i class="fa fa-check"></i><b>2.9</b> Exercises</a><ul>
<li class="chapter" data-level="2.9.1" data-path="mod-vba-intro.html"><a href="mod-vba-intro.html#ex-vba-hello"><i class="fa fa-check"></i><b>2.9.1</b> Exercise - Hello</a></li>
<li class="chapter" data-level="2.9.2" data-path="mod-vba-intro.html"><a href="mod-vba-intro.html#ex-vba-macro"><i class="fa fa-check"></i><b>2.9.2</b> Exercise - Record a macro</a></li>
<li class="chapter" data-level="2.9.3" data-path="mod-vba-intro.html"><a href="mod-vba-intro.html#ex-vba-user-input"><i class="fa fa-check"></i><b>2.9.3</b> Exercise - User input</a></li>
<li class="chapter" data-level="2.9.4" data-path="mod-vba-intro.html"><a href="mod-vba-intro.html#ex-vba-max-min"><i class="fa fa-check"></i><b>2.9.4</b> Exercise - Max and min number</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="mod-vba-loops-cond.html"><a href="mod-vba-loops-cond.html"><i class="fa fa-check"></i><b>3</b> Loops and conditional statements</a><ul>
<li class="chapter" data-level="3.1" data-path="mod-vba-loops-cond.html"><a href="mod-vba-loops-cond.html#lo-vba-loops-cond"><i class="fa fa-check"></i><b>3.1</b> Learning outcomes</a></li>
<li class="chapter" data-level="3.2" data-path="mod-vba-loops-cond.html"><a href="mod-vba-loops-cond.html#vba-operators"><i class="fa fa-check"></i><b>3.2</b> Relational and logical operators</a></li>
<li class="chapter" data-level="3.3" data-path="mod-vba-loops-cond.html"><a href="mod-vba-loops-cond.html#vba-loops"><i class="fa fa-check"></i><b>3.3</b> Loops</a></li>
<li class="chapter" data-level="3.4" data-path="mod-vba-loops-cond.html"><a href="mod-vba-loops-cond.html#vba-cond"><i class="fa fa-check"></i><b>3.4</b> Conditional statements</a></li>
<li class="chapter" data-level="3.5" data-path="mod-vba-loops-cond.html"><a href="mod-vba-loops-cond.html#vba-ex-jen"><i class="fa fa-check"></i><b>3.5</b> Example - Find Jen</a></li>
<li class="chapter" data-level="3.6" data-path="mod-vba-loops-cond.html"><a href="mod-vba-loops-cond.html#vba-ex-dist-mat"><i class="fa fa-check"></i><b>3.6</b> Example - A distance matrix</a></li>
<li class="chapter" data-level="3.7" data-path="mod-vba-loops-cond.html"><a href="mod-vba-loops-cond.html#recap"><i class="fa fa-check"></i><b>3.7</b> Recap</a></li>
<li class="chapter" data-level="3.8" data-path="mod-vba-loops-cond.html"><a href="mod-vba-loops-cond.html#ex-vba-loops-cond"><i class="fa fa-check"></i><b>3.8</b> Exercises</a><ul>
<li class="chapter" data-level="3.8.1" data-path="mod-vba-loops-cond.html"><a href="mod-vba-loops-cond.html#ex-vba-loops"><i class="fa fa-check"></i><b>3.8.1</b> Exercise - Loops</a></li>
<li class="chapter" data-level="3.8.2" data-path="mod-vba-loops-cond.html"><a href="mod-vba-loops-cond.html#ex-vba-cond"><i class="fa fa-check"></i><b>3.8.2</b> Exercise - Conditional statements</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="mod-vba-procedures.html"><a href="mod-vba-procedures.html"><i class="fa fa-check"></i><b>4</b> Procedures</a><ul>
<li class="chapter" data-level="4.1" data-path="mod-vba-procedures.html"><a href="mod-vba-procedures.html#lo-vba-procedures"><i class="fa fa-check"></i><b>4.1</b> Learning outcomes</a></li>
<li class="chapter" data-level="4.2" data-path="mod-vba-procedures.html"><a href="mod-vba-procedures.html#vba-subs-functions"><i class="fa fa-check"></i><b>4.2</b> Subs and functions - The basics</a></li>
<li class="chapter" data-level="4.3" data-path="mod-vba-procedures.html"><a href="mod-vba-procedures.html#vba-optional-arg"><i class="fa fa-check"></i><b>4.3</b> Optional arguments</a></li>
<li class="chapter" data-level="4.4" data-path="mod-vba-procedures.html"><a href="mod-vba-procedures.html#vba-pub-priv"><i class="fa fa-check"></i><b>4.4</b> Public and private procedures</a></li>
<li class="chapter" data-level="4.5" data-path="mod-vba-procedures.html"><a href="mod-vba-procedures.html#vba-byref"><i class="fa fa-check"></i><b>4.5</b> Passing arguments by reference or by value</a><ul>
<li class="chapter" data-level="4.5.1" data-path="mod-vba-procedures.html"><a href="mod-vba-procedures.html#return-values-from-a-sub"><i class="fa fa-check"></i><b>4.5.1</b> Return values from a sub</a></li>
</ul></li>
<li class="chapter" data-level="4.6" data-path="mod-vba-procedures.html"><a href="mod-vba-procedures.html#vba-built-in"><i class="fa fa-check"></i><b>4.6</b> Built-in functions</a></li>
<li class="chapter" data-level="4.7" data-path="mod-vba-procedures.html"><a href="mod-vba-procedures.html#vba-test-persons"><i class="fa fa-check"></i><b>4.7</b> Example - Selection of test persons</a></li>
<li class="chapter" data-level="4.8" data-path="mod-vba-procedures.html"><a href="mod-vba-procedures.html#recap-1"><i class="fa fa-check"></i><b>4.8</b> Recap</a></li>
<li class="chapter" data-level="4.9" data-path="mod-vba-procedures.html"><a href="mod-vba-procedures.html#ex-vba-procedures"><i class="fa fa-check"></i><b>4.9</b> Exercises</a><ul>
<li class="chapter" data-level="4.9.1" data-path="mod-vba-procedures.html"><a href="mod-vba-procedures.html#ex-vba-subs"><i class="fa fa-check"></i><b>4.9.1</b> Exercise - Subs</a></li>
<li class="chapter" data-level="4.9.2" data-path="mod-vba-procedures.html"><a href="mod-vba-procedures.html#exercise---temperatures"><i class="fa fa-check"></i><b>4.9.2</b> Exercise - Temperatures</a></li>
<li class="chapter" data-level="4.9.3" data-path="mod-vba-procedures.html"><a href="mod-vba-procedures.html#ex-vba-functions"><i class="fa fa-check"></i><b>4.9.3</b> Exercise - Functions</a></li>
<li class="chapter" data-level="4.9.4" data-path="mod-vba-procedures.html"><a href="mod-vba-procedures.html#ex-vba-worksheet-functions"><i class="fa fa-check"></i><b>4.9.4</b> Exercise - Worksheet functions</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="mod-vba-datatypes.html"><a href="mod-vba-datatypes.html"><i class="fa fa-check"></i><b>5</b> Advanced data types and usage</a><ul>
<li class="chapter" data-level="5.1" data-path="mod-vba-datatypes.html"><a href="mod-vba-datatypes.html#lo-vba-datatypes"><i class="fa fa-check"></i><b>5.1</b> Learning outcomes</a></li>
<li class="chapter" data-level="5.2" data-path="mod-vba-datatypes.html"><a href="mod-vba-datatypes.html#vba-strings"><i class="fa fa-check"></i><b>5.2</b> Strings</a></li>
<li class="chapter" data-level="5.3" data-path="mod-vba-datatypes.html"><a href="mod-vba-datatypes.html#vba-objects"><i class="fa fa-check"></i><b>5.3</b> Objects</a></li>
<li class="chapter" data-level="5.4" data-path="mod-vba-datatypes.html"><a href="mod-vba-datatypes.html#vba-wst"><i class="fa fa-check"></i><b>5.4</b> The Worksheet object</a></li>
<li class="chapter" data-level="5.5" data-path="mod-vba-datatypes.html"><a href="mod-vba-datatypes.html#wst-rng"><i class="fa fa-check"></i><b>5.5</b> The Range object</a><ul>
<li class="chapter" data-level="5.5.1" data-path="mod-vba-datatypes.html"><a href="mod-vba-datatypes.html#current-region-of-a-range"><i class="fa fa-check"></i><b>5.5.1</b> Current region of a range</a></li>
<li class="chapter" data-level="5.5.2" data-path="mod-vba-datatypes.html"><a href="mod-vba-datatypes.html#input-and-output-1"><i class="fa fa-check"></i><b>5.5.2</b> Input and output</a></li>
<li class="chapter" data-level="5.5.3" data-path="mod-vba-datatypes.html"><a href="mod-vba-datatypes.html#sorting-a-range"><i class="fa fa-check"></i><b>5.5.3</b> Sorting a range</a></li>
</ul></li>
<li class="chapter" data-level="5.6" data-path="mod-vba-datatypes.html"><a href="mod-vba-datatypes.html#vba-ary"><i class="fa fa-check"></i><b>5.6</b> Arrays</a><ul>
<li class="chapter" data-level="5.6.1" data-path="mod-vba-datatypes.html"><a href="mod-vba-datatypes.html#multi-dimensional-arrays"><i class="fa fa-check"></i><b>5.6.1</b> Multi-dimensional arrays</a></li>
<li class="chapter" data-level="5.6.2" data-path="mod-vba-datatypes.html"><a href="mod-vba-datatypes.html#dynamic-arrays"><i class="fa fa-check"></i><b>5.6.2</b> Dynamic arrays</a></li>
<li class="chapter" data-level="5.6.3" data-path="mod-vba-datatypes.html"><a href="mod-vba-datatypes.html#input-and-output-2"><i class="fa fa-check"></i><b>5.6.3</b> Input and output</a></li>
<li class="chapter" data-level="5.6.4" data-path="mod-vba-datatypes.html"><a href="mod-vba-datatypes.html#sorting-arrays"><i class="fa fa-check"></i><b>5.6.4</b> Sorting arrays</a></li>
<li class="chapter" data-level="5.6.5" data-path="mod-vba-datatypes.html"><a href="mod-vba-datatypes.html#use-arrays-instead-of-ranges"><i class="fa fa-check"></i><b>5.6.5</b> Use arrays instead of ranges</a></li>
</ul></li>
<li class="chapter" data-level="5.7" data-path="mod-vba-datatypes.html"><a href="mod-vba-datatypes.html#vba-coll"><i class="fa fa-check"></i><b>5.7</b> Collections</a></li>
<li class="chapter" data-level="5.8" data-path="mod-vba-datatypes.html"><a href="mod-vba-datatypes.html#vba-ex-job-seq"><i class="fa fa-check"></i><b>5.8</b> Example - Job sequencing</a></li>
<li class="chapter" data-level="5.9" data-path="mod-vba-datatypes.html"><a href="mod-vba-datatypes.html#recap-2"><i class="fa fa-check"></i><b>5.9</b> Recap</a></li>
<li class="chapter" data-level="5.10" data-path="mod-vba-datatypes.html"><a href="mod-vba-datatypes.html#ex-vba-datatypes"><i class="fa fa-check"></i><b>5.10</b> Exercises</a><ul>
<li class="chapter" data-level="5.10.1" data-path="mod-vba-datatypes.html"><a href="mod-vba-datatypes.html#ex-vba-equal"><i class="fa fa-check"></i><b>5.10.1</b> Exercise - Equal entries</a></li>
<li class="chapter" data-level="5.10.2" data-path="mod-vba-datatypes.html"><a href="mod-vba-datatypes.html#ex-vba-search-products"><i class="fa fa-check"></i><b>5.10.2</b> Exercise - Product search</a></li>
<li class="chapter" data-level="5.10.3" data-path="mod-vba-datatypes.html"><a href="mod-vba-datatypes.html#ex-vba-read-collections"><i class="fa fa-check"></i><b>5.10.3</b> Exercise - Read collections</a></li>
<li class="chapter" data-level="5.10.4" data-path="mod-vba-datatypes.html"><a href="mod-vba-datatypes.html#ex-vba-read-arrays"><i class="fa fa-check"></i><b>5.10.4</b> Exercise - Read arrays</a></li>
<li class="chapter" data-level="5.10.5" data-path="mod-vba-datatypes.html"><a href="mod-vba-datatypes.html#ex-vba-process"><i class="fa fa-check"></i><b>5.10.5</b> Exercise - Process numbers</a></li>
<li class="chapter" data-level="5.10.6" data-path="mod-vba-datatypes.html"><a href="mod-vba-datatypes.html#ex-vba-search-pay"><i class="fa fa-check"></i><b>5.10.6</b> Exercise - Search payments</a></li>
<li class="chapter" data-level="5.10.7" data-path="mod-vba-datatypes.html"><a href="mod-vba-datatypes.html#ex-vba-flight"><i class="fa fa-check"></i><b>5.10.7</b> Exercise - Flight search</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="mod-vba-random-numbers.html"><a href="mod-vba-random-numbers.html"><i class="fa fa-check"></i><b>6</b> Generating random numbers</a><ul>
<li class="chapter" data-level="6.1" data-path="mod-vba-random-numbers.html"><a href="mod-vba-random-numbers.html#lo-vba-random-numbers"><i class="fa fa-check"></i><b>6.1</b> Learning outcomes</a></li>
<li class="chapter" data-level="6.2" data-path="mod-vba-random-numbers.html"><a href="mod-vba-random-numbers.html#vba-random-numbers"><i class="fa fa-check"></i><b>6.2</b> Generating random numbers</a></li>
<li class="chapter" data-level="6.3" data-path="mod-vba-random-numbers.html"><a href="mod-vba-random-numbers.html#vba-simulation"><i class="fa fa-check"></i><b>6.3</b> Simulation</a><ul>
<li class="chapter" data-level="6.3.1" data-path="mod-vba-random-numbers.html"><a href="mod-vba-random-numbers.html#sec-vba-tsp"><i class="fa fa-check"></i><b>6.3.1</b> Example - Traveling salesman problem</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="mod-vba-random-numbers.html"><a href="mod-vba-random-numbers.html#recap-3"><i class="fa fa-check"></i><b>6.4</b> Recap</a></li>
<li class="chapter" data-level="6.5" data-path="mod-vba-random-numbers.html"><a href="mod-vba-random-numbers.html#ex-vba-random-numbers"><i class="fa fa-check"></i><b>6.5</b> Exercises</a><ul>
<li class="chapter" data-level="6.5.1" data-path="mod-vba-random-numbers.html"><a href="mod-vba-random-numbers.html#ex-vba-random-int"><i class="fa fa-check"></i><b>6.5.1</b> Exercise - Two random integers</a></li>
<li class="chapter" data-level="6.5.2" data-path="mod-vba-random-numbers.html"><a href="mod-vba-random-numbers.html#ex-vba-swap"><i class="fa fa-check"></i><b>6.5.2</b> Exercise - Swap entries</a></li>
<li class="chapter" data-level="6.5.3" data-path="mod-vba-random-numbers.html"><a href="mod-vba-random-numbers.html#ex-vba-bakery"><i class="fa fa-check"></i><b>6.5.3</b> Exercise - Dan’s bakery</a></li>
<li class="chapter" data-level="6.5.4" data-path="mod-vba-random-numbers.html"><a href="mod-vba-random-numbers.html#ex-vba-generate"><i class="fa fa-check"></i><b>6.5.4</b> Exercise - Generating random numbers</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>II R</b></span></li>
<li class="chapter" data-level="7" data-path="mod-r-install.html"><a href="mod-r-install.html"><i class="fa fa-check"></i><b>7</b> Setting up R</a><ul>
<li class="chapter" data-level="7.1" data-path="mod-r-install.html"><a href="mod-r-install.html#lo-r-install"><i class="fa fa-check"></i><b>7.1</b> Learning outcomes</a></li>
<li class="chapter" data-level="7.2" data-path="mod-r-install.html"><a href="mod-r-install.html#r-install"><i class="fa fa-check"></i><b>7.2</b> Install R and RStudio</a><ul>
<li class="chapter" data-level="7.2.1" data-path="mod-r-install.html"><a href="mod-r-install.html#test-your-installation"><i class="fa fa-check"></i><b>7.2.1</b> Test your installation</a></li>
<li class="chapter" data-level="7.2.2" data-path="mod-r-install.html"><a href="mod-r-install.html#add-on-packages"><i class="fa fa-check"></i><b>7.2.2</b> Add-on packages</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="mod-r-install.html"><a href="mod-r-install.html#r-cloud"><i class="fa fa-check"></i><b>7.3</b> Setup and test RStudio Cloud</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="mod-r-workflow.html"><a href="mod-r-workflow.html"><i class="fa fa-check"></i><b>8</b> R basics and workflows</a><ul>
<li class="chapter" data-level="8.1" data-path="mod-r-workflow.html"><a href="mod-r-workflow.html#lo-r-workflow"><i class="fa fa-check"></i><b>8.1</b> Learning outcomes</a></li>
<li class="chapter" data-level="8.2" data-path="mod-r-workflow.html"><a href="mod-r-workflow.html#working-with-r-at-the-command-line-in-rstudio"><i class="fa fa-check"></i><b>8.2</b> Working with R at the command line in RStudio</a></li>
<li class="chapter" data-level="8.3" data-path="mod-r-workflow.html"><a href="mod-r-workflow.html#your-first-datacamp-course"><i class="fa fa-check"></i><b>8.3</b> Your first DataCamp course</a></li>
<li class="chapter" data-level="8.4" data-path="mod-r-workflow.html"><a href="mod-r-workflow.html#pipes"><i class="fa fa-check"></i><b>8.4</b> Pipes</a></li>
<li class="chapter" data-level="8.5" data-path="mod-r-workflow.html"><a href="mod-r-workflow.html#rprojs"><i class="fa fa-check"></i><b>8.5</b> RStudio projects</a><ul>
<li class="chapter" data-level="8.5.1" data-path="mod-r-workflow.html"><a href="mod-r-workflow.html#storing-your-code-in-a-script-file"><i class="fa fa-check"></i><b>8.5.1</b> Storing your code in a script file</a></li>
</ul></li>
<li class="chapter" data-level="8.6" data-path="mod-r-workflow.html"><a href="mod-r-workflow.html#rc-r-workflow"><i class="fa fa-check"></i><b>8.6</b> Recap</a></li>
<li class="chapter" data-level="8.7" data-path="mod-r-workflow.html"><a href="mod-r-workflow.html#ex-r-workflow"><i class="fa fa-check"></i><b>8.7</b> Exercises</a><ul>
<li class="chapter" data-level="8.7.1" data-path="mod-r-workflow.html"><a href="mod-r-workflow.html#exercise-group-work"><i class="fa fa-check"></i><b>8.7.1</b> Exercise (group work)</a></li>
<li class="chapter" data-level="8.7.2" data-path="mod-r-workflow.html"><a href="mod-r-workflow.html#exercise-piping"><i class="fa fa-check"></i><b>8.7.2</b> Exercise (piping)</a></li>
<li class="chapter" data-level="8.7.3" data-path="mod-r-workflow.html"><a href="mod-r-workflow.html#exercise-working-dir"><i class="fa fa-check"></i><b>8.7.3</b> Exercise (working dir)</a></li>
<li class="chapter" data-level="8.7.4" data-path="mod-r-workflow.html"><a href="mod-r-workflow.html#exercise-vectors"><i class="fa fa-check"></i><b>8.7.4</b> Exercise (vectors)</a></li>
<li class="chapter" data-level="8.7.5" data-path="mod-r-workflow.html"><a href="mod-r-workflow.html#exercise-matrices"><i class="fa fa-check"></i><b>8.7.5</b> Exercise (matrices)</a></li>
<li class="chapter" data-level="8.7.6" data-path="mod-r-workflow.html"><a href="mod-r-workflow.html#exercise-data-frames"><i class="fa fa-check"></i><b>8.7.6</b> Exercise (data frames)</a></li>
<li class="chapter" data-level="8.7.7" data-path="mod-r-workflow.html"><a href="mod-r-workflow.html#exercise-lists"><i class="fa fa-check"></i><b>8.7.7</b> Exercise (lists)</a></li>
<li class="chapter" data-level="8.7.8" data-path="mod-r-workflow.html"><a href="mod-r-workflow.html#ex-strings"><i class="fa fa-check"></i><b>8.7.8</b> Exercise (string management)</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="mod-r-loops-cond.html"><a href="mod-r-loops-cond.html"><i class="fa fa-check"></i><b>9</b> Loops and conditionals</a><ul>
<li class="chapter" data-level="9.1" data-path="mod-r-loops-cond.html"><a href="mod-r-loops-cond.html#lo-loops"><i class="fa fa-check"></i><b>9.1</b> Learning outcomes</a></li>
<li class="chapter" data-level="9.2" data-path="mod-r-loops-cond.html"><a href="mod-r-loops-cond.html#r-dc-loops-cond"><i class="fa fa-check"></i><b>9.2</b> Conditionals and control flow</a></li>
<li class="chapter" data-level="9.3" data-path="mod-r-loops-cond.html"><a href="mod-r-loops-cond.html#r-loops"><i class="fa fa-check"></i><b>9.3</b> Loops</a></li>
<li class="chapter" data-level="9.4" data-path="mod-r-loops-cond.html"><a href="mod-r-loops-cond.html#rc-r-loops-cond"><i class="fa fa-check"></i><b>9.4</b> Recap</a></li>
<li class="chapter" data-level="9.5" data-path="mod-r-loops-cond.html"><a href="mod-r-loops-cond.html#ex-r-loops-cond"><i class="fa fa-check"></i><b>9.5</b> Exercises</a><ul>
<li class="chapter" data-level="9.5.1" data-path="mod-r-loops-cond.html"><a href="mod-r-loops-cond.html#ex-r-conditional-expressions"><i class="fa fa-check"></i><b>9.5.1</b> Exercise (conditional expressions)</a></li>
<li class="chapter" data-level="9.5.2" data-path="mod-r-loops-cond.html"><a href="mod-r-loops-cond.html#ex-r-loops"><i class="fa fa-check"></i><b>9.5.2</b> Exercise (loops)</a></li>
<li class="chapter" data-level="9.5.3" data-path="mod-r-loops-cond.html"><a href="mod-r-loops-cond.html#ex-r-search-vector"><i class="fa fa-check"></i><b>9.5.3</b> Exercise (search vector)</a></li>
<li class="chapter" data-level="9.5.4" data-path="mod-r-loops-cond.html"><a href="mod-r-loops-cond.html#ex-dist"><i class="fa fa-check"></i><b>9.5.4</b> Exercise (calculating distances)</a></li>
<li class="chapter" data-level="9.5.5" data-path="mod-r-loops-cond.html"><a href="mod-r-loops-cond.html#ex-r-expand"><i class="fa fa-check"></i><b>9.5.5</b> Exercise (expand_grid)</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="10" data-path="mod-r-functions.html"><a href="mod-r-functions.html"><i class="fa fa-check"></i><b>10</b> Functions</a><ul>
<li class="chapter" data-level="10.1" data-path="mod-r-functions.html"><a href="mod-r-functions.html#lo-r-functions"><i class="fa fa-check"></i><b>10.1</b> Learning outcomes</a></li>
<li class="chapter" data-level="10.2" data-path="mod-r-functions.html"><a href="mod-r-functions.html#r-dc-functions"><i class="fa fa-check"></i><b>10.2</b> DataCamp course</a></li>
<li class="chapter" data-level="10.3" data-path="mod-r-functions.html"><a href="mod-r-functions.html#r-functions-extra"><i class="fa fa-check"></i><b>10.3</b> Functions returning multiple objects</a></li>
<li class="chapter" data-level="10.4" data-path="mod-r-functions.html"><a href="mod-r-functions.html#r-functions-arg"><i class="fa fa-check"></i><b>10.4</b> The <code>...</code> argument</a></li>
<li class="chapter" data-level="10.5" data-path="mod-r-functions.html"><a href="mod-r-functions.html#r-functions-doc"><i class="fa fa-check"></i><b>10.5</b> Documenting your functions</a></li>
<li class="chapter" data-level="10.6" data-path="mod-r-functions.html"><a href="mod-r-functions.html#example---job-sequencing"><i class="fa fa-check"></i><b>10.6</b> Example - Job sequencing</a></li>
<li class="chapter" data-level="10.7" data-path="mod-r-functions.html"><a href="mod-r-functions.html#rc-functions"><i class="fa fa-check"></i><b>10.7</b> Recap</a></li>
<li class="chapter" data-level="10.8" data-path="mod-r-functions.html"><a href="mod-r-functions.html#ex-r-functions"><i class="fa fa-check"></i><b>10.8</b> Exercises</a><ul>
<li class="chapter" data-level="10.8.1" data-path="mod-r-functions.html"><a href="mod-r-functions.html#ex-r-def-func"><i class="fa fa-check"></i><b>10.8.1</b> Exercise (defining functions)</a></li>
<li class="chapter" data-level="10.8.2" data-path="mod-r-functions.html"><a href="mod-r-functions.html#ex-r-euclidean-distances"><i class="fa fa-check"></i><b>10.8.2</b> Exercise (euclidean distances)</a></li>
<li class="chapter" data-level="10.8.3" data-path="mod-r-functions.html"><a href="mod-r-functions.html#exercise-scope"><i class="fa fa-check"></i><b>10.8.3</b> Exercise (scope)</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="11" data-path="mod-r-tidyverse-intro.html"><a href="mod-r-tidyverse-intro.html"><i class="fa fa-check"></i><b>11</b> Introduction to tidyverse and RMarkdown</a><ul>
<li class="chapter" data-level="11.1" data-path="mod-r-tidyverse-intro.html"><a href="mod-r-tidyverse-intro.html#lo-tidyverse-intro"><i class="fa fa-check"></i><b>11.1</b> Learning outcomes</a></li>
<li class="chapter" data-level="11.2" data-path="mod-r-tidyverse-intro.html"><a href="mod-r-tidyverse-intro.html#r-tidyverse-intro"><i class="fa fa-check"></i><b>11.2</b> The tidyverse package</a></li>
<li class="chapter" data-level="11.3" data-path="mod-r-tidyverse-intro.html"><a href="mod-r-tidyverse-intro.html#r-markdown-intro"><i class="fa fa-check"></i><b>11.3</b> Writing reproducible reports</a></li>
<li class="chapter" data-level="11.4" data-path="mod-r-tidyverse-intro.html"><a href="mod-r-tidyverse-intro.html#r-tibbles-intro"><i class="fa fa-check"></i><b>11.4</b> Tibbles</a></li>
<li class="chapter" data-level="11.5" data-path="mod-r-tidyverse-intro.html"><a href="mod-r-tidyverse-intro.html#rc-tidyverse-intro"><i class="fa fa-check"></i><b>11.5</b> Recap</a></li>
<li class="chapter" data-level="11.6" data-path="mod-r-tidyverse-intro.html"><a href="mod-r-tidyverse-intro.html#ex-tidyverse-intro"><i class="fa fa-check"></i><b>11.6</b> Exercises</a><ul>
<li class="chapter" data-level="11.6.1" data-path="mod-r-tidyverse-intro.html"><a href="mod-r-tidyverse-intro.html#exercise-your-first-rmarkdown-exercise"><i class="fa fa-check"></i><b>11.6.1</b> Exercise (your first RMarkdown exercise)</a></li>
<li class="chapter" data-level="11.6.2" data-path="mod-r-tidyverse-intro.html"><a href="mod-r-tidyverse-intro.html#exercise-tibbles"><i class="fa fa-check"></i><b>11.6.2</b> Exercise (tibbles)</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="12" data-path="mod-r-io.html"><a href="mod-r-io.html"><i class="fa fa-check"></i><b>12</b> Importing and exporting data</a><ul>
<li class="chapter" data-level="12.1" data-path="mod-r-io.html"><a href="mod-r-io.html#lo-r-io"><i class="fa fa-check"></i><b>12.1</b> Learning outcomes</a></li>
<li class="chapter" data-level="12.2" data-path="mod-r-io.html"><a href="mod-r-io.html#r-io-csv"><i class="fa fa-check"></i><b>12.2</b> CSV files</a><ul>
<li class="chapter" data-level="12.2.1" data-path="mod-r-io.html"><a href="mod-r-io.html#reading-a-csv-file"><i class="fa fa-check"></i><b>12.2.1</b> Reading a CSV file</a></li>
<li class="chapter" data-level="12.2.2" data-path="mod-r-io.html"><a href="mod-r-io.html#writing-to-csv-files"><i class="fa fa-check"></i><b>12.2.2</b> Writing to CSV files</a></li>
</ul></li>
<li class="chapter" data-level="12.3" data-path="mod-r-io.html"><a href="mod-r-io.html#r-io-excel"><i class="fa fa-check"></i><b>12.3</b> Excel</a></li>
<li class="chapter" data-level="12.4" data-path="mod-r-io.html"><a href="mod-r-io.html#r-io-google"><i class="fa fa-check"></i><b>12.4</b> Google Sheets</a></li>
<li class="chapter" data-level="12.5" data-path="mod-r-io.html"><a href="mod-r-io.html#r-io-text"><i class="fa fa-check"></i><b>12.5</b> Text files</a></li>
<li class="chapter" data-level="12.6" data-path="mod-r-io.html"><a href="mod-r-io.html#r-io-r"><i class="fa fa-check"></i><b>12.6</b> R’s native binary format</a></li>
<li class="chapter" data-level="12.7" data-path="mod-r-io.html"><a href="mod-r-io.html#r-io-json"><i class="fa fa-check"></i><b>12.7</b> Json</a></li>
<li class="chapter" data-level="12.8" data-path="mod-r-io.html"><a href="mod-r-io.html#rc-r-io"><i class="fa fa-check"></i><b>12.8</b> Recap</a></li>
<li class="chapter" data-level="12.9" data-path="mod-r-io.html"><a href="mod-r-io.html#ex-r-io"><i class="fa fa-check"></i><b>12.9</b> Exercises</a><ul>
<li class="chapter" data-level="12.9.1" data-path="mod-r-io.html"><a href="mod-r-io.html#exercise-statistikbanken"><i class="fa fa-check"></i><b>12.9.1</b> Exercise (Statistikbanken)</a></li>
<li class="chapter" data-level="12.9.2" data-path="mod-r-io.html"><a href="mod-r-io.html#exercise-tuples-in-opl"><i class="fa fa-check"></i><b>12.9.2</b> Exercise (tuples in OPL)</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="13" data-path="mod-r-transform.html"><a href="mod-r-transform.html"><i class="fa fa-check"></i><b>13</b> Transforming data</a><ul>
<li class="chapter" data-level="13.1" data-path="mod-r-transform.html"><a href="mod-r-transform.html#lo-r-transform"><i class="fa fa-check"></i><b>13.1</b> Learning outcomes</a></li>
<li class="chapter" data-level="13.2" data-path="mod-r-transform.html"><a href="mod-r-transform.html#r-transform-tidyverse"><i class="fa fa-check"></i><b>13.2</b> Working with data in the tidyverse</a></li>
<li class="chapter" data-level="13.3" data-path="mod-r-transform.html"><a href="mod-r-transform.html#r-transform-joins"><i class="fa fa-check"></i><b>13.3</b> Mutating joins</a></li>
<li class="chapter" data-level="13.4" data-path="mod-r-transform.html"><a href="mod-r-transform.html#rc-r-transform"><i class="fa fa-check"></i><b>13.4</b> Recap</a></li>
<li class="chapter" data-level="13.5" data-path="mod-r-transform.html"><a href="mod-r-transform.html#ex-r-transform"><i class="fa fa-check"></i><b>13.5</b> Exercises</a><ul>
<li class="chapter" data-level="13.5.1" data-path="mod-r-transform.html"><a href="mod-r-transform.html#ex-gapminder1"><i class="fa fa-check"></i><b>13.5.1</b> Exercise (gapminder)</a></li>
<li class="chapter" data-level="13.5.2" data-path="mod-r-transform.html"><a href="mod-r-transform.html#ex-babynames1"><i class="fa fa-check"></i><b>13.5.2</b> Exercise (babynames)</a></li>
<li class="chapter" data-level="13.5.3" data-path="mod-r-transform.html"><a href="mod-r-transform.html#ex-profit1"><i class="fa fa-check"></i><b>13.5.3</b> Exercise (profit)</a></li>
<li class="chapter" data-level="13.5.4" data-path="mod-r-transform.html"><a href="mod-r-transform.html#ex-fish"><i class="fa fa-check"></i><b>13.5.4</b> Exercise (fisheries)</a></li>
<li class="chapter" data-level="13.5.5" data-path="mod-r-transform.html"><a href="mod-r-transform.html#ex-company"><i class="fa fa-check"></i><b>13.5.5</b> Exercise (company ranking)</a></li>
<li class="chapter" data-level="13.5.6" data-path="mod-r-transform.html"><a href="mod-r-transform.html#ex-titanic"><i class="fa fa-check"></i><b>13.5.6</b> Exercise (Titanic)</a></li>
<li class="chapter" data-level="13.5.7" data-path="mod-r-transform.html"><a href="mod-r-transform.html#ex-r-covid"><i class="fa fa-check"></i><b>13.5.7</b> Exercise (covid)</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="14" data-path="mod-r-plot.html"><a href="mod-r-plot.html"><i class="fa fa-check"></i><b>14</b> Data visualization using ggplot</a><ul>
<li class="chapter" data-level="14.1" data-path="mod-r-plot.html"><a href="mod-r-plot.html#lo-plot"><i class="fa fa-check"></i><b>14.1</b> Learning outcomes</a></li>
<li class="chapter" data-level="14.2" data-path="mod-r-plot.html"><a href="mod-r-plot.html#r-plot-intro"><i class="fa fa-check"></i><b>14.2</b> Introduction to data visualization</a></li>
<li class="chapter" data-level="14.3" data-path="mod-r-plot.html"><a href="mod-r-plot.html#r-plot-multi"><i class="fa fa-check"></i><b>14.3</b> Combining plots into one using <em>patchwork</em></a></li>
<li class="chapter" data-level="14.4" data-path="mod-r-plot.html"><a href="mod-r-plot.html#r-plot-save"><i class="fa fa-check"></i><b>14.4</b> Saving graphics</a></li>
<li class="chapter" data-level="14.5" data-path="mod-r-plot.html"><a href="mod-r-plot.html#rc-r-plot"><i class="fa fa-check"></i><b>14.5</b> Recap</a></li>
<li class="chapter" data-level="14.6" data-path="mod-r-plot.html"><a href="mod-r-plot.html#ex-r-plot"><i class="fa fa-check"></i><b>14.6</b> Exercises</a><ul>
<li class="chapter" data-level="14.6.1" data-path="mod-r-plot.html"><a href="mod-r-plot.html#ex-gapminder2"><i class="fa fa-check"></i><b>14.6.1</b> Exercise (gapminder)</a></li>
<li class="chapter" data-level="14.6.2" data-path="mod-r-plot.html"><a href="mod-r-plot.html#ex-profit2"><i class="fa fa-check"></i><b>14.6.2</b> Exercise (profit)</a></li>
<li class="chapter" data-level="14.6.3" data-path="mod-r-plot.html"><a href="mod-r-plot.html#ex-covid19"><i class="fa fa-check"></i><b>14.6.3</b> Exercise (COVID-19)</a></li>
<li class="chapter" data-level="14.6.4" data-path="mod-r-plot.html"><a href="mod-r-plot.html#ex-lego"><i class="fa fa-check"></i><b>14.6.4</b> Exercise (Lego and sales)</a></li>
<li class="chapter" data-level="14.6.5" data-path="mod-r-plot.html"><a href="mod-r-plot.html#ex-company-plot"><i class="fa fa-check"></i><b>14.6.5</b> Exercise (company ranking)</a></li>
<li class="chapter" data-level="14.6.6" data-path="mod-r-plot.html"><a href="mod-r-plot.html#ex-titanic-plot"><i class="fa fa-check"></i><b>14.6.6</b> Exercise (Titanic)</a></li>
<li class="chapter" data-level="14.6.7" data-path="mod-r-plot.html"><a href="mod-r-plot.html#ex-r-covid-plot"><i class="fa fa-check"></i><b>14.6.7</b> Exercise (covid)</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>III Extra R</b></span></li>
<li class="chapter" data-level="15" data-path="mod-r-dist-fit.html"><a href="mod-r-dist-fit.html"><i class="fa fa-check"></i><b>15</b> Fitting probability distributions</a><ul>
<li class="chapter" data-level="15.1" data-path="mod-r-dist-fit.html"><a href="mod-r-dist-fit.html#lo-r-dist-fit"><i class="fa fa-check"></i><b>15.1</b> Learning outcomes</a></li>
<li class="chapter" data-level="15.2" data-path="mod-r-dist-fit.html"><a href="mod-r-dist-fit.html#sec-r-dist-fit-intro"><i class="fa fa-check"></i><b>15.2</b> Introduction</a></li>
<li class="chapter" data-level="15.3" data-path="mod-r-dist-fit.html"><a href="mod-r-dist-fit.html#sec-r-dist-fit-cont"><i class="fa fa-check"></i><b>15.3</b> Fitting distributions to continuous data</a><ul>
<li class="chapter" data-level="15.3.1" data-path="mod-r-dist-fit.html"><a href="mod-r-dist-fit.html#example-breakdown-times"><i class="fa fa-check"></i><b>15.3.1</b> Example: breakdown times</a></li>
</ul></li>
<li class="chapter" data-level="15.4" data-path="mod-r-dist-fit.html"><a href="mod-r-dist-fit.html#sec-r-dist-fit-discrete"><i class="fa fa-check"></i><b>15.4</b> Fitting distributions to discrete data</a><ul>
<li class="chapter" data-level="15.4.1" data-path="mod-r-dist-fit.html"><a href="mod-r-dist-fit.html#example-sales-of-lottery-tickets"><i class="fa fa-check"></i><b>15.4.1</b> Example: sales of lottery tickets</a></li>
</ul></li>
<li class="chapter" data-level="15.5" data-path="mod-r-dist-fit.html"><a href="mod-r-dist-fit.html#sec-dist-fit-pois"><i class="fa fa-check"></i><b>15.5</b> The Poisson process</a></li>
<li class="chapter" data-level="15.6" data-path="mod-r-dist-fit.html"><a href="mod-r-dist-fit.html#rc-r-dist-fit"><i class="fa fa-check"></i><b>15.6</b> Recap</a></li>
<li class="chapter" data-level="15.7" data-path="mod-r-dist-fit.html"><a href="mod-r-dist-fit.html#ex-r-dist-fit"><i class="fa fa-check"></i><b>15.7</b> Exercises</a><ul>
<li class="chapter" data-level="15.7.1" data-path="mod-r-dist-fit.html"><a href="mod-r-dist-fit.html#exercise---call-center"><i class="fa fa-check"></i><b>15.7.1</b> Exercise - Call center</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="16" data-path="mod-r-maps.html"><a href="mod-r-maps.html"><i class="fa fa-check"></i><b>16</b> Spatial data and maps</a><ul>
<li class="chapter" data-level="16.1" data-path="mod-r-maps.html"><a href="mod-r-maps.html#lo-maps"><i class="fa fa-check"></i><b>16.1</b> Learning outcomes</a></li>
<li class="chapter" data-level="16.2" data-path="mod-r-maps.html"><a href="mod-r-maps.html#sec-map-api-key"><i class="fa fa-check"></i><b>16.2</b> Services for obtatining spatial data</a></li>
<li class="chapter" data-level="16.3" data-path="mod-r-maps.html"><a href="mod-r-maps.html#calculating-distances"><i class="fa fa-check"></i><b>16.3</b> Calculating distances</a><ul>
<li class="chapter" data-level="16.3.1" data-path="mod-r-maps.html"><a href="mod-r-maps.html#using-google-maps"><i class="fa fa-check"></i><b>16.3.1</b> Using Google Maps</a></li>
<li class="chapter" data-level="16.3.2" data-path="mod-r-maps.html"><a href="mod-r-maps.html#using-bing-maps"><i class="fa fa-check"></i><b>16.3.2</b> Using Bing Maps</a></li>
</ul></li>
<li class="chapter" data-level="16.4" data-path="mod-r-maps.html"><a href="mod-r-maps.html#geocoding-and-reverse-geocoding"><i class="fa fa-check"></i><b>16.4</b> Geocoding and reverse geocoding</a><ul>
<li class="chapter" data-level="16.4.1" data-path="mod-r-maps.html"><a href="mod-r-maps.html#using-google-maps-1"><i class="fa fa-check"></i><b>16.4.1</b> Using Google maps</a></li>
<li class="chapter" data-level="16.4.2" data-path="mod-r-maps.html"><a href="mod-r-maps.html#use-bing-maps"><i class="fa fa-check"></i><b>16.4.2</b> Use Bing Maps</a></li>
</ul></li>
<li class="chapter" data-level="16.5" data-path="mod-r-maps.html"><a href="mod-r-maps.html#adding-markers-and-routes-to-a-map"><i class="fa fa-check"></i><b>16.5</b> Adding markers and routes to a map</a></li>
</ul></li>
<li class="appendix"><span><b>Appendix</b></span></li>
<li class="chapter" data-level="A" data-path="groups.html"><a href="groups.html"><i class="fa fa-check"></i><b>A</b> Working in groups</a><ul>
<li class="chapter" data-level="" data-path="groups.html"><a href="groups.html#using-git"><i class="fa fa-check"></i>Using Git together with GitHub</a><ul>
<li class="chapter" data-level="" data-path="groups.html"><a href="groups.html#register-a-free-github-account"><i class="fa fa-check"></i>Register a free GitHub account</a></li>
<li class="chapter" data-level="" data-path="groups.html"><a href="groups.html#install-git"><i class="fa fa-check"></i>Install Git</a></li>
<li class="chapter" data-level="" data-path="groups.html"><a href="groups.html#check-your-installation"><i class="fa fa-check"></i>Check your installation</a></li>
<li class="chapter" data-level="" data-path="groups.html"><a href="groups.html#setup-projects-using-git-and-github"><i class="fa fa-check"></i>Setup projects using Git and GitHub</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="B" data-path="annotate.html"><a href="annotate.html"><i class="fa fa-check"></i><b>B</b> Annotate the course notes</a></li>
<li class="chapter" data-level="C" data-path="help.html"><a href="help.html"><i class="fa fa-check"></i><b>C</b> Getting help</a></li>
<li class="chapter" data-level="D" data-path="coding-convention.html"><a href="coding-convention.html"><i class="fa fa-check"></i><b>D</b> Coding/naming convention</a><ul>
<li class="chapter" data-level="D.1" data-path="coding-convention.html"><a href="coding-convention.html#commenting-your-code"><i class="fa fa-check"></i><b>D.1</b> Commenting your code</a></li>
</ul></li>
<li class="chapter" data-level="E" data-path="apdx-vba.html"><a href="apdx-vba.html"><i class="fa fa-check"></i><b>E</b> VBA specific topics</a><ul>
<li class="chapter" data-level="E.1" data-path="apdx-vba.html"><a href="apdx-vba.html#vba-debug"><i class="fa fa-check"></i><b>E.1</b> Debugging your code</a></li>
<li class="chapter" data-level="E.2" data-path="apdx-vba.html"><a href="apdx-vba.html#error-handling"><i class="fa fa-check"></i><b>E.2</b> Error handling</a></li>
<li class="chapter" data-level="E.3" data-path="apdx-vba.html"><a href="apdx-vba.html#vba-course-procedures"><i class="fa fa-check"></i><b>E.3</b> Course procedures</a></li>
</ul></li>
<li class="chapter" data-level="F" data-path="lg-course.html"><a href="lg-course.html"><i class="fa fa-check"></i><b>F</b> Learning goals</a></li>
<li class="chapter" data-level="G" data-path="ba.html"><a href="ba.html"><i class="fa fa-check"></i><b>G</b> Business Analytics</a></li>
<li class="chapter" data-level="H" data-path="colophon.html"><a href="colophon.html"><i class="fa fa-check"></i><b>H</b> Colophon</a></li>
<li class="divider"></li>
<li><center>
  <a rel="license" href="./index.html#ack">
    License: CC BY-NC-SA<br>
    <i class = "fab fa-creative-commons fa-2x"></i>
    <i class = "fab fa-creative-commons-by fa-2x"></i>
    <i class = "fab fa-creative-commons-nc fa-2x"></i>
    <i class = "fab fa-creative-commons-sa fa-2x"></i>
  </a>
</li></center>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Tools for Analytics (TFA)</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="mod-r-loops-cond" class="section level1 hasAnchor">
<h1><span class="header-section-number">Module 9</span> Loops and conditionals<a href="mod-r-loops-cond.html#mod-r-loops-cond" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>This module considers programming with loops and conditional statements in R.</p>
<p>A template project for this module is given on [RStudio Cloud][r-cloud-mod9] (open it and use it while reading the notes).</p>
<div id="learning-path-diagram-8" class="section level4 unnumbered hasAnchor">
<h4>Learning path diagram<a href="mod-r-loops-cond.html#learning-path-diagram-8" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div id="htmlwidget-3a2b39f59548d75e6e17" style="width:100%;height:480px;" class="grViz html-widget"></div>
<script type="application/json" data-for="htmlwidget-3a2b39f59548d75e6e17">{"x":{"diagram":"digraph {\n\ngraph [layout = \"neato\",\n       outputorder = \"edgesfirst\",\n       bgcolor = \"white\"]\n\nnode [fontname = \"Helvetica\",\n      fontsize = \"10\",\n      shape = \"circle\",\n      fixedsize = \"true\",\n      width = \"0.5\",\n      style = \"filled\",\n      fillcolor = \"aliceblue\",\n      color = \"gray70\",\n      fontcolor = \"gray50\"]\n\nedge [fontname = \"Helvetica\",\n     fontsize = \"8\",\n     len = \"1.5\",\n     color = \"gray80\",\n     arrowsize = \"0.5\"]\n\n  \"1\" [label = \"💡 Conditionals\\n& control flow\", URL = \"https://campus.datacamp.com/courses/intermediate-r/chapter-1-conditionals-and-control-flow\", tooltip = \"Chapter 1 of the interactive DataCamp course Intermediate R.\", style = \"filled\", fixedsize = \"FALSE\", fontsize = \"11\", fontcolor = \"white\", penwidth = \"2\", fontname = \"Helvetica-bold\", shape = \"egg\", margin = \"0.2\", width = \"0.5\", fillcolor = \"DarkSeaGreen4\", pos = \"0,2!\"] \n  \"2\" [label = \"📖 Logical\\nfunctions\", URL = \"#r-dc-loops-cond\", tooltip = \"Useful logical functions.\", style = \"filled\", fixedsize = \"FALSE\", fontsize = \"11\", fontcolor = \"white\", penwidth = \"2\", fontname = \"Helvetica-bold\", shape = \"rect\", margin = \"0.2\", width = \"0.5\", fillcolor = \"DarkSeaGreen4\", pos = \"2,2!\"] \n  \"3\" [label = \"💡 Loops\", URL = \"https://campus.datacamp.com/courses/intermediate-r/chapter-2-loops\", tooltip = \"Chapter 2 of the interactive DataCamp course Intermediate R.\", style = \"filled\", fixedsize = \"FALSE\", fontsize = \"11\", fontcolor = \"white\", penwidth = \"2\", fontname = \"Helvetica-bold\", shape = \"egg\", margin = \"0.2\", width = \"0.5\", fillcolor = \"DarkSeaGreen4\", pos = \"4,2!\"] \n  \"4\" [label = \"📖 Loops\\n(further)\", URL = \"#r-loops\", tooltip = \"Further tools for looping\", style = \"filled\", fixedsize = \"FALSE\", fontsize = \"11\", fontcolor = \"white\", penwidth = \"2\", fontname = \"Helvetica-bold\", shape = \"rect\", margin = \"0.2\", width = \"0.5\", fillcolor = \"DarkSeaGreen4\", pos = \"6,2!\"] \n  \"5\" [label = \"💻 Exercises\", URL = \"#ex-r-loops-cond\", tooltip = \"Exercises of the module\", style = \"filled\", fixedsize = \"FALSE\", fontsize = \"11\", fontcolor = \"white\", penwidth = \"2\", fontname = \"Helvetica-bold\", shape = \"egg\", margin = \"0.2\", width = \"0.5\", fillcolor = \"DarkSeaGreen4\", pos = \"8,2!\"] \n  \"6\" [label = \"🎬 Control\\nstructures\", URL = \"https://www.youtube.com/watch?v=s_h9ruNwI_0&ab_channel=RogerPeng\", tooltip = \"Roger Peng has an introduction to control structures including if, for and while on YouTube.\", style = \"filled\", fixedsize = \"FALSE\", fontsize = \"11\", fontcolor = \"white\", penwidth = \"2\", fontname = \"Helvetica-bold\", shape = \"rect\", margin = \"0.2\", width = \"0.5\", fillcolor = \"DarkOrange4\", pos = \"0,4!\"] \n  \"7\" [label = \"📖 Iteration\", URL = \"https://r4ds.had.co.nz/iteration.html\", tooltip = \"A more detailed introduction to loops (Chapter 21 in H. Wickham, 2017).\", style = \"filled\", fixedsize = \"FALSE\", fontsize = \"11\", fontcolor = \"white\", penwidth = \"2\", fontname = \"Helvetica-bold\", shape = \"rect\", margin = \"0.2\", width = \"0.5\", fillcolor = \"PeachPuff3\", pos = \"4,0!\"] \n  \"8\" [label = \"💡 Loops\\nusing apply\", URL = \"https://campus.datacamp.com/courses/intermediate-r/chapter-4-the-apply-family?ex=1\", tooltip = \"An introduction to loops using the apply family of functions (Chapter 4 of the interactive DataCamp course Intermediate R).\", style = \"filled\", fixedsize = \"FALSE\", fontsize = \"11\", fontcolor = \"white\", penwidth = \"2\", fontname = \"Helvetica-bold\", shape = \"egg\", margin = \"0.2\", width = \"0.5\", fillcolor = \"PeachPuff3\", pos = \"6,0!\"] \n  \"9\" [label = \"🎬 Conditionals\\n& loops\", URL = \"https://youtu.be/2evtsnPaoDg\", tooltip = \"Hefin Rhys has a video about conditional statements and loops with examples.\", style = \"filled\", fixedsize = \"FALSE\", fontsize = \"11\", fontcolor = \"white\", penwidth = \"2\", fontname = \"Helvetica-bold\", shape = \"rect\", margin = \"0.2\", width = \"0.5\", fillcolor = \"PeachPuff3\", pos = \"1,0!\"] \n  \"10\" [label = \"\", URL = \"\", tooltip = \" \", style = \"filled\", fixedsize = \"true\", fontsize = \"9\", fontcolor = \"white\", penwidth = \"0.5\", fontname = \"Helvetica\", shape = \"rect\", height = \"1\", width = \"6\", fillcolor = \"#F0F8FF\", pos = \"5.9,3.91!\"] \n  \"11\" [label = \"Color:\", URL = \"\", tooltip = \" \", style = \"filled\", fixedsize = \"true\", fontsize = \"9\", fontcolor = \"black\", penwidth = \"0\", fontname = \"Helvetica\", shape = \"none\", height = \"0\", width = \"0.8\", fillcolor = \"#FFFFFE\", pos = \"3.27,4.25!\"] \n  \"12\" [label = \"mandatory\", URL = \"\", tooltip = \"Mandatory syllabus.\", style = \"filled\", fixedsize = \"true\", fontsize = \"9\", fontcolor = \"white\", penwidth = \"2\", fontname = \"Helvetica\", shape = \"rect\", width = \"0.8\", fillcolor = \"DarkSeaGreen4\", pos = \"3.5,3.85!\"] \n  \"13\" [label = \"alternative\", URL = \"\", tooltip = \"Alternative syllabus if you prefer another learning style.\", style = \"filled\", fixedsize = \"true\", fontsize = \"9\", fontcolor = \"white\", penwidth = \"2\", fontname = \"Helvetica\", shape = \"rect\", width = \"0.8\", fillcolor = \"DarkOrange4\", pos = \"4.5,3.85!\"] \n  \"14\" [label = \"extra\", URL = \"\", tooltip = \"Extra learning if you are interested (not part of syllabus).\", style = \"filled\", fixedsize = \"true\", fontsize = \"9\", fontcolor = \"white\", penwidth = \"2\", fontname = \"Helvetica\", shape = \"rect\", width = \"0.8\", fillcolor = \"PeachPuff3\", pos = \"5.5,3.85!\"] \n  \"15\" [label = \"Shape:\", URL = \"\", tooltip = \" \", style = \"filled\", fixedsize = \"true\", fontsize = \"9\", fontcolor = \"black\", penwidth = \"0\", fontname = \"Helvetica\", shape = \"none\", height = \"0\", width = \"1\", fillcolor = \"#FFFFFE\", pos = \"6.7,4.25!\"] \n  \"16\" [label = \"non-interactive\", URL = \"\", tooltip = \"Non-interactive learning content (e.g. reading).\", style = \"filled\", fixedsize = \"true\", fontsize = \"9\", fontcolor = \"white\", penwidth = \"2\", fontname = \"Helvetica\", shape = \"rect\", width = \"1\", fillcolor = \"Grey40\", pos = \"7,3.85!\"] \n  \"17\" [label = \"interactive\", URL = \"\", tooltip = \"Interactive learning content (tutorial, exercises etc.).\", style = \"filled\", fixedsize = \"true\", fontsize = \"9\", fontcolor = \"white\", penwidth = \"2\", fontname = \"Helvetica\", shape = \"egg\", width = \"1\", fillcolor = \"Grey40\", pos = \"8.25,3.85!\"] \n\"1\"->\"2\" [color = \"black\", arrowhead = \"vee\"] \n\"1\"->\"6\" [color = \"black\", arrowhead = \"vee\"] \n\"1\"->\"9\" [color = \"black\", arrowhead = \"vee\"] \n\"2\"->\"3\" [color = \"black\", arrowhead = \"vee\"] \n\"3\"->\"4\" [color = \"black\", arrowhead = \"vee\"] \n\"3\"->\"7\" [color = \"black\", arrowhead = \"vee\"] \n\"3\"->\"9\" [color = \"black\", arrowhead = \"vee\"] \n\"4\"->\"5\" [color = \"black\", arrowhead = \"vee\"] \n\"4\"->\"8\" [color = \"black\", arrowhead = \"vee\"] \n}","config":{"engine":"dot","options":null}},"evals":[],"jsHooks":[]}</script>
<div>It is recommended that you follow the green learning path; however, you may like a different learning style. In the learning path diagram, there are links to alternative online content (video or reading). Note this is an alternative to the standard learning path that you may use instead (you should not do both). The learning path may also have extra content, that is NOT a part of syllabus (only look at it if you want more info)!</div>
</div>
<div id="lo-loops" class="section level2 hasAnchor">
<h2><span class="header-section-number">9.1</span> Learning outcomes<a href="mod-r-loops-cond.html#lo-loops" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>By the end of this module, you are expected to be able to:</p>
<ul>
<li>Formulate conditional statements.</li>
<li>Use functions <code>any</code> and <code>all</code>.</li>
<li>Formulate loops in R using for and while statements.</li>
<li>Use function <code>if_else</code>.</li>
</ul>
<p>The learning outcomes relate to the <a href="lg-course.html#lg-course">overall learning goals</a> number 2, 4 and 10 of the course.</p>
<!-- SOLO increasing: identify · memorise · name · do simple procedure · collect data · -->
<!-- enumerate · describe · interpret · formulate · list · paraphrase · combine · do -->
<!-- algorithms · compare · contrast · explain causes · analyse · relate · derive · -->
<!-- evaluate · apply · argue · theorise · generalise · hypothesise · solve · reflect -->
</div>
<div id="r-dc-loops-cond" class="section level2 hasAnchor">
<h2><span class="header-section-number">9.2</span> Conditionals and control flow<a href="mod-r-loops-cond.html#r-dc-loops-cond" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>An excellent introduction to conditionals and if statements is given in <a href="https://campus.datacamp.com/courses/intermediate-r/chapter-1-conditionals-and-control-flow">Chapter 1</a> of the interactive DataCamp course <a href="https://learn.datacamp.com/courses/intermediate-r">Intermediate R</a>. Please complete the chapter before continuing.</p>
<p>Some functions are also useful for comparing logical data types. Consider this example:</p>
<div class="sourceCode" id="cb291"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb291-1"><a href="mod-r-loops-cond.html#cb291-1"></a>x &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">5</span>, <span class="dv">10</span>, <span class="dv">2</span>, <span class="dv">17</span>, <span class="dv">11</span>, <span class="ot">NA</span>, <span class="dv">4</span>)</span>
<span id="cb291-2"><a href="mod-r-loops-cond.html#cb291-2"></a>x <span class="op">&gt;</span><span class="st"> </span><span class="dv">10</span>  <span class="co"># are the elements greater that 10</span></span>
<span id="cb291-3"><a href="mod-r-loops-cond.html#cb291-3"></a><span class="co">#&gt; [1] FALSE FALSE FALSE FALSE FALSE  TRUE  TRUE    NA FALSE</span></span>
<span id="cb291-4"><a href="mod-r-loops-cond.html#cb291-4"></a><span class="kw">any</span>(x <span class="op">&gt;</span><span class="st"> </span><span class="dv">10</span>)  <span class="co"># are any of the elements greater that 10</span></span>
<span id="cb291-5"><a href="mod-r-loops-cond.html#cb291-5"></a><span class="co">#&gt; [1] TRUE</span></span>
<span id="cb291-6"><a href="mod-r-loops-cond.html#cb291-6"></a><span class="kw">all</span>(x <span class="op">&gt;</span><span class="st"> </span><span class="dv">10</span>)  <span class="co"># are all of the elements greater that 10</span></span>
<span id="cb291-7"><a href="mod-r-loops-cond.html#cb291-7"></a><span class="co">#&gt; [1] FALSE</span></span>
<span id="cb291-8"><a href="mod-r-loops-cond.html#cb291-8"></a><span class="kw">all</span>(x <span class="op">&lt;</span><span class="st"> </span><span class="dv">20</span>)  <span class="co"># are all of the elements greater that 20</span></span>
<span id="cb291-9"><a href="mod-r-loops-cond.html#cb291-9"></a><span class="co">#&gt; [1] NA</span></span>
<span id="cb291-10"><a href="mod-r-loops-cond.html#cb291-10"></a><span class="kw">all</span>(x <span class="op">&lt;</span><span class="st"> </span><span class="dv">20</span>, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)  <span class="co"># are all of the elements greater that 20</span></span>
<span id="cb291-11"><a href="mod-r-loops-cond.html#cb291-11"></a><span class="co">#&gt; [1] TRUE</span></span></code></pre></div>
<p>That is, functions <code>any</code> and <code>all</code> can be used to join logical values in vectors.</p>
<p>Some if statements can be written alternatively using function <code>if_else</code>:</p>
<div class="sourceCode" id="cb292"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb292-1"><a href="mod-r-loops-cond.html#cb292-1"></a><span class="kw">if_else</span>(condition, true, false, <span class="dt">missing =</span> <span class="ot">NULL</span>)</span></code></pre></div>
<p>For example:</p>
<div class="sourceCode" id="cb293"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb293-1"><a href="mod-r-loops-cond.html#cb293-1"></a>x &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="op">-</span><span class="dv">5</span><span class="op">:</span><span class="dv">5</span>, <span class="ot">NA</span>)</span>
<span id="cb293-2"><a href="mod-r-loops-cond.html#cb293-2"></a>x</span>
<span id="cb293-3"><a href="mod-r-loops-cond.html#cb293-3"></a><span class="co">#&gt;  [1] -5 -4 -3 -2 -1  0  1  2  3  4  5 NA</span></span>
<span id="cb293-4"><a href="mod-r-loops-cond.html#cb293-4"></a></span>
<span id="cb293-5"><a href="mod-r-loops-cond.html#cb293-5"></a><span class="co">## using if and for</span></span>
<span id="cb293-6"><a href="mod-r-loops-cond.html#cb293-6"></a>res &lt;-<span class="st"> </span><span class="kw">rep</span>(<span class="st">&quot;&quot;</span>, <span class="kw">length</span>(x))</span>
<span id="cb293-7"><a href="mod-r-loops-cond.html#cb293-7"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="kw">seq_along</span>(x)) {</span>
<span id="cb293-8"><a href="mod-r-loops-cond.html#cb293-8"></a>  <span class="cf">if</span> (<span class="kw">is.na</span>(x[i])) res[i] &lt;-<span class="st"> &quot;missing&quot;</span></span>
<span id="cb293-9"><a href="mod-r-loops-cond.html#cb293-9"></a>  <span class="cf">else</span> <span class="cf">if</span> (x[i] <span class="op">&lt;</span><span class="st"> </span><span class="dv">0</span>) res[i] &lt;-<span class="st"> &quot;negative&quot;</span></span>
<span id="cb293-10"><a href="mod-r-loops-cond.html#cb293-10"></a>  <span class="cf">else</span> res[i] &lt;-<span class="st"> &quot;positive&quot;</span></span>
<span id="cb293-11"><a href="mod-r-loops-cond.html#cb293-11"></a>}</span>
<span id="cb293-12"><a href="mod-r-loops-cond.html#cb293-12"></a>res</span>
<span id="cb293-13"><a href="mod-r-loops-cond.html#cb293-13"></a><span class="co">#&gt;  [1] &quot;negative&quot; &quot;negative&quot; &quot;negative&quot; &quot;negative&quot; &quot;negative&quot; &quot;positive&quot; &quot;positive&quot; &quot;positive&quot;</span></span>
<span id="cb293-14"><a href="mod-r-loops-cond.html#cb293-14"></a><span class="co">#&gt;  [9] &quot;positive&quot; &quot;positive&quot; &quot;positive&quot; &quot;missing&quot;</span></span>
<span id="cb293-15"><a href="mod-r-loops-cond.html#cb293-15"></a></span>
<span id="cb293-16"><a href="mod-r-loops-cond.html#cb293-16"></a><span class="co">## implicit if statement</span></span>
<span id="cb293-17"><a href="mod-r-loops-cond.html#cb293-17"></a>res &lt;-<span class="st"> </span><span class="kw">rep</span>(<span class="st">&quot;&quot;</span>, <span class="kw">length</span>(x))</span>
<span id="cb293-18"><a href="mod-r-loops-cond.html#cb293-18"></a>res</span>
<span id="cb293-19"><a href="mod-r-loops-cond.html#cb293-19"></a><span class="co">#&gt;  [1] &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot;</span></span>
<span id="cb293-20"><a href="mod-r-loops-cond.html#cb293-20"></a>res[x <span class="op">&lt;</span><span class="st"> </span><span class="dv">0</span>] &lt;-<span class="st"> &quot;negative&quot;</span></span>
<span id="cb293-21"><a href="mod-r-loops-cond.html#cb293-21"></a>res[x <span class="op">&gt;=</span><span class="st"> </span><span class="dv">0</span>] &lt;-<span class="st"> &quot;positive&quot;</span></span>
<span id="cb293-22"><a href="mod-r-loops-cond.html#cb293-22"></a>res[<span class="kw">is.na</span>(x)] &lt;-<span class="st"> &quot;missing&quot;</span></span>
<span id="cb293-23"><a href="mod-r-loops-cond.html#cb293-23"></a>res</span>
<span id="cb293-24"><a href="mod-r-loops-cond.html#cb293-24"></a><span class="co">#&gt;  [1] &quot;negative&quot; &quot;negative&quot; &quot;negative&quot; &quot;negative&quot; &quot;negative&quot; &quot;positive&quot; &quot;positive&quot; &quot;positive&quot;</span></span>
<span id="cb293-25"><a href="mod-r-loops-cond.html#cb293-25"></a><span class="co">#&gt;  [9] &quot;positive&quot; &quot;positive&quot; &quot;positive&quot; &quot;missing&quot;</span></span>
<span id="cb293-26"><a href="mod-r-loops-cond.html#cb293-26"></a></span>
<span id="cb293-27"><a href="mod-r-loops-cond.html#cb293-27"></a><span class="co">## using if_else</span></span>
<span id="cb293-28"><a href="mod-r-loops-cond.html#cb293-28"></a>res &lt;-<span class="st"> </span><span class="kw">if_else</span>(x <span class="op">&lt;</span><span class="st"> </span><span class="dv">0</span>, <span class="st">&quot;negative&quot;</span>, <span class="st">&quot;positive&quot;</span>, <span class="st">&quot;missing&quot;</span>)</span>
<span id="cb293-29"><a href="mod-r-loops-cond.html#cb293-29"></a>res</span>
<span id="cb293-30"><a href="mod-r-loops-cond.html#cb293-30"></a><span class="co">#&gt;  [1] &quot;negative&quot; &quot;negative&quot; &quot;negative&quot; &quot;negative&quot; &quot;negative&quot; &quot;positive&quot; &quot;positive&quot; &quot;positive&quot;</span></span>
<span id="cb293-31"><a href="mod-r-loops-cond.html#cb293-31"></a><span class="co">#&gt;  [9] &quot;positive&quot; &quot;positive&quot; &quot;positive&quot; &quot;missing&quot;</span></span></code></pre></div>
</div>
<div id="r-loops" class="section level2 hasAnchor">
<h2><span class="header-section-number">9.3</span> Loops<a href="mod-r-loops-cond.html#r-loops" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>An excellent introduction to conditionals and if statements is given in <a href="https://campus.datacamp.com/courses/intermediate-r/chapter-2-loops">Chapter 2</a> of the interactive DataCamp course <a href="https://learn.datacamp.com/courses/intermediate-r">Intermediate R</a>. Please complete the chapter before continuing (stop when Chapter 2 finishes).</p>
<p>Loops in R may be slow. However, not if you follow some golden rules:</p>
<ul>
<li>Do not use a loop when a vectorized alternative exists.</li>
<li>Do not grow objects (via <code>c</code>, <code>cbind</code>, etc) during the loop - R has to create a new object and copy across the information just to add a new element or row/column. Instead, allocate an object to hold the results and fill it in during the loop.</li>
</ul>
<p>As an example, consider the for loop with 4 iterations:</p>
<div class="sourceCode" id="cb294"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb294-1"><a href="mod-r-loops-cond.html#cb294-1"></a>i_val &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">6</span>,<span class="dv">9</span>)</span>
<span id="cb294-2"><a href="mod-r-loops-cond.html#cb294-2"></a>res &lt;-<span class="st"> </span><span class="kw">rep</span>(<span class="ot">NA</span>,<span class="dv">4</span>)</span>
<span id="cb294-3"><a href="mod-r-loops-cond.html#cb294-3"></a>res</span>
<span id="cb294-4"><a href="mod-r-loops-cond.html#cb294-4"></a><span class="co">#&gt; [1] NA NA NA NA</span></span>
<span id="cb294-5"><a href="mod-r-loops-cond.html#cb294-5"></a><span class="cf">for</span> (idx <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">length</span>(i_val)) {</span>
<span id="cb294-6"><a href="mod-r-loops-cond.html#cb294-6"></a>  res[idx] &lt;-<span class="st"> </span><span class="dv">6</span> <span class="op">*</span><span class="st"> </span>i_val[idx] <span class="op">+</span><span class="st"> </span><span class="dv">9</span></span>
<span id="cb294-7"><a href="mod-r-loops-cond.html#cb294-7"></a>}</span>
<span id="cb294-8"><a href="mod-r-loops-cond.html#cb294-8"></a>res</span>
<span id="cb294-9"><a href="mod-r-loops-cond.html#cb294-9"></a><span class="co">#&gt; [1] 15 21 45 63</span></span></code></pre></div>
<p>Note we allocate memory for the result vector before the loop so we do not have to grow the result object. Next, we calculate results <span class="math inline">\(6i+9\)</span> using a loop. Be careful here! This is not the same:</p>
<div class="sourceCode" id="cb295"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb295-1"><a href="mod-r-loops-cond.html#cb295-1"></a>res &lt;-<span class="st"> </span><span class="kw">rep</span>(<span class="ot">NA</span>,<span class="dv">4</span>)</span>
<span id="cb295-2"><a href="mod-r-loops-cond.html#cb295-2"></a><span class="cf">for</span> (i <span class="cf">in</span> i_val) {</span>
<span id="cb295-3"><a href="mod-r-loops-cond.html#cb295-3"></a>  res[i] &lt;-<span class="st"> </span><span class="dv">6</span> <span class="op">*</span><span class="st"> </span>i <span class="op">+</span><span class="st"> </span><span class="dv">9</span></span>
<span id="cb295-4"><a href="mod-r-loops-cond.html#cb295-4"></a>}</span>
<span id="cb295-5"><a href="mod-r-loops-cond.html#cb295-5"></a>res</span>
<span id="cb295-6"><a href="mod-r-loops-cond.html#cb295-6"></a><span class="co">#&gt; [1] 15 21 NA NA NA 45 NA NA 63</span></span></code></pre></div>
<p>In this example, however, we can use a vectorized alternative:</p>
<div class="sourceCode" id="cb296"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb296-1"><a href="mod-r-loops-cond.html#cb296-1"></a>res &lt;-<span class="st"> </span><span class="dv">6</span> <span class="op">*</span><span class="st"> </span>i_val <span class="op">+</span><span class="st"> </span><span class="dv">9</span></span>
<span id="cb296-2"><a href="mod-r-loops-cond.html#cb296-2"></a>res</span>
<span id="cb296-3"><a href="mod-r-loops-cond.html#cb296-3"></a><span class="co">#&gt; [1] 15 21 45 63</span></span></code></pre></div>
<p>where the operation is applied to each element in the vector.</p>
<p>Nested for loops is also possible. A simple example of a nested loop:</p>
<div class="sourceCode" id="cb297"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb297-1"><a href="mod-r-loops-cond.html#cb297-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="dv">3</span>) {</span>
<span id="cb297-2"><a href="mod-r-loops-cond.html#cb297-2"></a>  <span class="cf">for</span> (j <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="dv">2</span>) {</span>
<span id="cb297-3"><a href="mod-r-loops-cond.html#cb297-3"></a>    <span class="kw">cat</span>(<span class="kw">str_c</span>(<span class="st">&quot;i =&quot;</span>, i, <span class="st">&quot; j = &quot;</span>,j, <span class="st">&quot;</span><span class="ch">\n</span><span class="st">&quot;</span>))</span>
<span id="cb297-4"><a href="mod-r-loops-cond.html#cb297-4"></a>  }</span>
<span id="cb297-5"><a href="mod-r-loops-cond.html#cb297-5"></a>}</span>
<span id="cb297-6"><a href="mod-r-loops-cond.html#cb297-6"></a><span class="co">#&gt; i =1 j = 1</span></span>
<span id="cb297-7"><a href="mod-r-loops-cond.html#cb297-7"></a><span class="co">#&gt; i =1 j = 2</span></span>
<span id="cb297-8"><a href="mod-r-loops-cond.html#cb297-8"></a><span class="co">#&gt; i =2 j = 1</span></span>
<span id="cb297-9"><a href="mod-r-loops-cond.html#cb297-9"></a><span class="co">#&gt; i =2 j = 2</span></span>
<span id="cb297-10"><a href="mod-r-loops-cond.html#cb297-10"></a><span class="co">#&gt; i =3 j = 1</span></span>
<span id="cb297-11"><a href="mod-r-loops-cond.html#cb297-11"></a><span class="co">#&gt; i =3 j = 2</span></span></code></pre></div>
<p>We here use the function <code>cat</code> to print out a string (<code>\n</code> indicates new line). Note how the nested loops are executed:</p>
<ul>
<li>Set <code>i = 1</code> (outer loop)
<ul>
<li>Set <code>j = 1</code> (inner loop), <code>i</code> stays 1</li>
<li>Set <code>j = 2</code> (inner loop), <code>i</code> stays 1</li>
<li>Inner loop finishes, proceed with outer loop.</li>
</ul></li>
<li>Increase <code>i = 2</code> (outer loop)
<ul>
<li>Set <code>j = 1</code> (inner loop), <code>i</code> stays 2</li>
<li>Set <code>j = 2</code> (inner loop), <code>i</code> stays 2</li>
<li>Inner loop finishes, proceed with outer loop.</li>
</ul></li>
<li>Increase <code>i = 3</code> (outer loop)
<ul>
<li>Set <code>j = 1</code> (inner loop), <code>i</code> stays 3</li>
<li>Set <code>j = 2</code> (inner loop), <code>i</code> stays 3</li>
<li>Inner loop finishes, proceed with outer loop.</li>
</ul></li>
<li>Outer loop finishes as well (we looped over <code>i in 1:3</code>). Job done.</li>
</ul>
<p>Nested loops can be used to iterate over matrices or data frames:</p>
<div class="sourceCode" id="cb298"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb298-1"><a href="mod-r-loops-cond.html#cb298-1"></a>mat &lt;-<span class="st"> </span><span class="kw">matrix</span>(<span class="ot">NA</span>, <span class="dt">nrow =</span> <span class="dv">2</span>, <span class="dt">ncol =</span> <span class="dv">3</span>)</span>
<span id="cb298-2"><a href="mod-r-loops-cond.html#cb298-2"></a>mat</span>
<span id="cb298-3"><a href="mod-r-loops-cond.html#cb298-3"></a><span class="co">#&gt;      [,1] [,2] [,3]</span></span>
<span id="cb298-4"><a href="mod-r-loops-cond.html#cb298-4"></a><span class="co">#&gt; [1,]   NA   NA   NA</span></span>
<span id="cb298-5"><a href="mod-r-loops-cond.html#cb298-5"></a><span class="co">#&gt; [2,]   NA   NA   NA</span></span>
<span id="cb298-6"><a href="mod-r-loops-cond.html#cb298-6"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(mat)) {</span>
<span id="cb298-7"><a href="mod-r-loops-cond.html#cb298-7"></a>  <span class="cf">for</span> (j <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">ncol</span>(mat)) {</span>
<span id="cb298-8"><a href="mod-r-loops-cond.html#cb298-8"></a>     mat[i,j] &lt;-<span class="st"> </span>(i<span class="dv">-1</span>)<span class="op">*</span><span class="kw">ncol</span>(mat) <span class="op">+</span><span class="st"> </span>j</span>
<span id="cb298-9"><a href="mod-r-loops-cond.html#cb298-9"></a>     <span class="kw">cat</span>(<span class="kw">str_c</span>(<span class="st">&quot;Entry (&quot;</span>, i, <span class="st">&quot;, &quot;</span>, j, <span class="st">&quot;) = &quot;</span>, mat[i,j], <span class="st">&quot;</span><span class="ch">\n</span><span class="st">&quot;</span>))</span>
<span id="cb298-10"><a href="mod-r-loops-cond.html#cb298-10"></a>  }</span>
<span id="cb298-11"><a href="mod-r-loops-cond.html#cb298-11"></a>}</span>
<span id="cb298-12"><a href="mod-r-loops-cond.html#cb298-12"></a><span class="co">#&gt; Entry (1, 1) = 1</span></span>
<span id="cb298-13"><a href="mod-r-loops-cond.html#cb298-13"></a><span class="co">#&gt; Entry (1, 2) = 2</span></span>
<span id="cb298-14"><a href="mod-r-loops-cond.html#cb298-14"></a><span class="co">#&gt; Entry (1, 3) = 3</span></span>
<span id="cb298-15"><a href="mod-r-loops-cond.html#cb298-15"></a><span class="co">#&gt; Entry (2, 1) = 4</span></span>
<span id="cb298-16"><a href="mod-r-loops-cond.html#cb298-16"></a><span class="co">#&gt; Entry (2, 2) = 5</span></span>
<span id="cb298-17"><a href="mod-r-loops-cond.html#cb298-17"></a><span class="co">#&gt; Entry (2, 3) = 6</span></span>
<span id="cb298-18"><a href="mod-r-loops-cond.html#cb298-18"></a>mat</span>
<span id="cb298-19"><a href="mod-r-loops-cond.html#cb298-19"></a><span class="co">#&gt;      [,1] [,2] [,3]</span></span>
<span id="cb298-20"><a href="mod-r-loops-cond.html#cb298-20"></a><span class="co">#&gt; [1,]    1    2    3</span></span>
<span id="cb298-21"><a href="mod-r-loops-cond.html#cb298-21"></a><span class="co">#&gt; [2,]    4    5    6</span></span></code></pre></div>
<p>Often you can replace nested loops with a single loop by using <code>expand_grid</code>:</p>
<div class="sourceCode" id="cb299"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb299-1"><a href="mod-r-loops-cond.html#cb299-1"></a><span class="kw">library</span>(tidyverse)  <span class="co"># load function expand_grid</span></span>
<span id="cb299-2"><a href="mod-r-loops-cond.html#cb299-2"></a>mat &lt;-<span class="st"> </span><span class="kw">matrix</span>(<span class="ot">NA</span>, <span class="dt">nrow =</span> <span class="dv">2</span>, <span class="dt">ncol =</span> <span class="dv">3</span>)</span>
<span id="cb299-3"><a href="mod-r-loops-cond.html#cb299-3"></a>ite &lt;-<span class="st"> </span><span class="kw">expand_grid</span>(<span class="dt">i =</span> <span class="dv">1</span><span class="op">:</span><span class="dv">2</span>, <span class="dt">j=</span><span class="dv">1</span><span class="op">:</span><span class="dv">3</span>)</span>
<span id="cb299-4"><a href="mod-r-loops-cond.html#cb299-4"></a>ite</span>
<span id="cb299-5"><a href="mod-r-loops-cond.html#cb299-5"></a><span class="co">#&gt; # A tibble: 6 × 2</span></span>
<span id="cb299-6"><a href="mod-r-loops-cond.html#cb299-6"></a><span class="co">#&gt;       i     j</span></span>
<span id="cb299-7"><a href="mod-r-loops-cond.html#cb299-7"></a><span class="co">#&gt;   &lt;int&gt; &lt;int&gt;</span></span>
<span id="cb299-8"><a href="mod-r-loops-cond.html#cb299-8"></a><span class="co">#&gt; 1     1     1</span></span>
<span id="cb299-9"><a href="mod-r-loops-cond.html#cb299-9"></a><span class="co">#&gt; 2     1     2</span></span>
<span id="cb299-10"><a href="mod-r-loops-cond.html#cb299-10"></a><span class="co">#&gt; 3     1     3</span></span>
<span id="cb299-11"><a href="mod-r-loops-cond.html#cb299-11"></a><span class="co">#&gt; 4     2     1</span></span>
<span id="cb299-12"><a href="mod-r-loops-cond.html#cb299-12"></a><span class="co">#&gt; 5     2     2</span></span>
<span id="cb299-13"><a href="mod-r-loops-cond.html#cb299-13"></a><span class="co">#&gt; 6     2     3</span></span>
<span id="cb299-14"><a href="mod-r-loops-cond.html#cb299-14"></a><span class="cf">for</span> (r <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(ite)) { <span class="co"># iterate over rows</span></span>
<span id="cb299-15"><a href="mod-r-loops-cond.html#cb299-15"></a>   i &lt;-<span class="st"> </span>ite<span class="op">$</span>i[r]</span>
<span id="cb299-16"><a href="mod-r-loops-cond.html#cb299-16"></a>   j &lt;-<span class="st"> </span>ite<span class="op">$</span>j[r]</span>
<span id="cb299-17"><a href="mod-r-loops-cond.html#cb299-17"></a>   mat[i,j] &lt;-<span class="st"> </span>(i<span class="dv">-1</span>)<span class="op">*</span><span class="kw">ncol</span>(mat) <span class="op">+</span><span class="st"> </span>j</span>
<span id="cb299-18"><a href="mod-r-loops-cond.html#cb299-18"></a>   <span class="kw">cat</span>(<span class="kw">str_c</span>(<span class="st">&quot;Entry (&quot;</span>, i, <span class="st">&quot;, &quot;</span>, j, <span class="st">&quot;) = &quot;</span>, mat[i,j], <span class="st">&quot;</span><span class="ch">\n</span><span class="st">&quot;</span>))</span>
<span id="cb299-19"><a href="mod-r-loops-cond.html#cb299-19"></a>}</span>
<span id="cb299-20"><a href="mod-r-loops-cond.html#cb299-20"></a><span class="co">#&gt; Entry (1, 1) = 1</span></span>
<span id="cb299-21"><a href="mod-r-loops-cond.html#cb299-21"></a><span class="co">#&gt; Entry (1, 2) = 2</span></span>
<span id="cb299-22"><a href="mod-r-loops-cond.html#cb299-22"></a><span class="co">#&gt; Entry (1, 3) = 3</span></span>
<span id="cb299-23"><a href="mod-r-loops-cond.html#cb299-23"></a><span class="co">#&gt; Entry (2, 1) = 4</span></span>
<span id="cb299-24"><a href="mod-r-loops-cond.html#cb299-24"></a><span class="co">#&gt; Entry (2, 2) = 5</span></span>
<span id="cb299-25"><a href="mod-r-loops-cond.html#cb299-25"></a><span class="co">#&gt; Entry (2, 3) = 6</span></span>
<span id="cb299-26"><a href="mod-r-loops-cond.html#cb299-26"></a>mat</span>
<span id="cb299-27"><a href="mod-r-loops-cond.html#cb299-27"></a><span class="co">#&gt;      [,1] [,2] [,3]</span></span>
<span id="cb299-28"><a href="mod-r-loops-cond.html#cb299-28"></a><span class="co">#&gt; [1,]    1    2    3</span></span>
<span id="cb299-29"><a href="mod-r-loops-cond.html#cb299-29"></a><span class="co">#&gt; [2,]    4    5    6</span></span></code></pre></div>
<p>Note <code>expand_grid</code> creates a data frame with all combinations. This way of looping is a more flexible approach since you can</p>
<ul>
<li>nest more loops by adding more columns to <code>ite</code>,</li>
<li>add different values in each column.</li>
</ul>
<p>For instance, if you only want to calculate values for row 2 and columns 1 and 3 the code becomes:</p>
<div class="sourceCode" id="cb300"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb300-1"><a href="mod-r-loops-cond.html#cb300-1"></a>mat &lt;-<span class="st"> </span><span class="kw">matrix</span>(<span class="ot">NA</span>, <span class="dt">nrow =</span> <span class="dv">2</span>, <span class="dt">ncol =</span> <span class="dv">3</span>)</span>
<span id="cb300-2"><a href="mod-r-loops-cond.html#cb300-2"></a>ite &lt;-<span class="st"> </span><span class="kw">expand_grid</span>(<span class="dt">i =</span> <span class="dv">2</span>, <span class="dt">j =</span> <span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">3</span>))</span>
<span id="cb300-3"><a href="mod-r-loops-cond.html#cb300-3"></a>ite</span>
<span id="cb300-4"><a href="mod-r-loops-cond.html#cb300-4"></a><span class="co">#&gt; # A tibble: 2 × 2</span></span>
<span id="cb300-5"><a href="mod-r-loops-cond.html#cb300-5"></a><span class="co">#&gt;       i     j</span></span>
<span id="cb300-6"><a href="mod-r-loops-cond.html#cb300-6"></a><span class="co">#&gt;   &lt;dbl&gt; &lt;dbl&gt;</span></span>
<span id="cb300-7"><a href="mod-r-loops-cond.html#cb300-7"></a><span class="co">#&gt; 1     2     1</span></span>
<span id="cb300-8"><a href="mod-r-loops-cond.html#cb300-8"></a><span class="co">#&gt; 2     2     3</span></span>
<span id="cb300-9"><a href="mod-r-loops-cond.html#cb300-9"></a><span class="cf">for</span> (r <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(ite)) { <span class="co"># iterate over rows</span></span>
<span id="cb300-10"><a href="mod-r-loops-cond.html#cb300-10"></a>   i &lt;-<span class="st"> </span>ite<span class="op">$</span>i[r]</span>
<span id="cb300-11"><a href="mod-r-loops-cond.html#cb300-11"></a>   j &lt;-<span class="st"> </span>ite<span class="op">$</span>j[r]</span>
<span id="cb300-12"><a href="mod-r-loops-cond.html#cb300-12"></a>   mat[i,j] &lt;-<span class="st"> </span>(i<span class="dv">-1</span>)<span class="op">*</span><span class="kw">ncol</span>(mat) <span class="op">+</span><span class="st"> </span>j</span>
<span id="cb300-13"><a href="mod-r-loops-cond.html#cb300-13"></a>   <span class="kw">cat</span>(<span class="kw">str_c</span>(<span class="st">&quot;Entry (&quot;</span>, i, <span class="st">&quot;, &quot;</span>, j, <span class="st">&quot;) = &quot;</span>, mat[i,j], <span class="st">&quot;</span><span class="ch">\n</span><span class="st">&quot;</span>))</span>
<span id="cb300-14"><a href="mod-r-loops-cond.html#cb300-14"></a>}</span>
<span id="cb300-15"><a href="mod-r-loops-cond.html#cb300-15"></a><span class="co">#&gt; Entry (2, 1) = 4</span></span>
<span id="cb300-16"><a href="mod-r-loops-cond.html#cb300-16"></a><span class="co">#&gt; Entry (2, 3) = 6</span></span>
<span id="cb300-17"><a href="mod-r-loops-cond.html#cb300-17"></a>mat</span>
<span id="cb300-18"><a href="mod-r-loops-cond.html#cb300-18"></a><span class="co">#&gt;      [,1] [,2] [,3]</span></span>
<span id="cb300-19"><a href="mod-r-loops-cond.html#cb300-19"></a><span class="co">#&gt; [1,]   NA   NA   NA</span></span>
<span id="cb300-20"><a href="mod-r-loops-cond.html#cb300-20"></a><span class="co">#&gt; [2,]    4   NA    6</span></span></code></pre></div>
</div>
<div id="rc-r-loops-cond" class="section level2 hasAnchor">
<h2><span class="header-section-number">9.4</span> Recap<a href="mod-r-loops-cond.html#rc-r-loops-cond" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><em>Comparison/relational operators</em> known to R are:</p>
<ul>
<li><code>&lt;</code> for less than,</li>
<li><code>&gt;</code> for greater than,</li>
<li><code>&lt;=</code> for less than or equal to,</li>
<li><code>&gt;=</code> for greater than or equal to,</li>
<li><code>==</code> for equal to each other (and not <code>=</code> which is typically used for assignment!),</li>
<li><code>!=</code> not equal to each other.</li>
</ul>
<p><em>Logical operators</em> known to R are:</p>
<ul>
<li><code>&amp;</code> and,</li>
<li><code>|</code> or,</li>
<li><code>!</code> not.</li>
</ul>
<p>If you use <code>&amp;&amp;</code> and <code>||</code> only the first element in vectors are compared. In general this is used rarely.</p>
<p>Useful functions that return a logical are <code>any</code> and <code>all</code> which can be used to join logical values in vectors.</p>
<p>Conditional Statements can be constructed using for instance <code>if</code> and <code>while</code> statements. Moreover, function <code>if_else</code> is a vectorized alternative.</p>
<p><em>Loops</em> can be created using <code>for</code> and <code>while</code> statements.</p>
<p>You can break out of a loop using <code>break</code> and jump to the next iteration (skipping the remainder of the code in the loop) using <code>next</code>.</p>
<p>Do not use a loop when a vectorized alternative exists.</p>
<p>Do not grow objects during the loop. Instead, allocate an object to hold the results and fill it in during the loop.</p>
<p>Nested loops are possible in R. However, often they can be converted into a single loop by defining a data frame having the values of the nested loops in each row. Here function <code>expand_grid</code> may be useful to create the data frame.</p>
<p>You may also have a look at the <a href="https://bss-osca.github.io/tfa/slides/06-01_r-loops-cond-slides.html">slides for this module</a>.</p>
</div>
<div id="ex-r-loops-cond" class="section level2 hasAnchor">
<h2><span class="header-section-number">9.5</span> Exercises<a href="mod-r-loops-cond.html#ex-r-loops-cond" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Below you will find a set of exercises. Always have a look at the exercises before you meet in your study group and try to solve them yourself. Are you stuck, see the <a href="help.html#help">help page</a>. Some of the solutions to each exercise can be seen by pressing the button at each question. Beware, you will not learn by giving up too early. Put some effort into finding a solution! Always practice using shortcuts in RStudio (see <strong>Tools &gt; Keyboard Shortcuts Help</strong>).</p>
<p>Go to the <a href="https://rstudio.cloud/spaces/274292/join?access_code=iLqcFGfYZ43En9-eMNzu7zPusybjK7Mdj0vyazWH">Tools for Analytics</a> workspace and download/export the TM9 project. Open it on your laptop and have a look at the files in the <code>exercises</code> folder which can be used as a starting point.</p>
<div id="ex-r-conditional-expressions" class="section level3 hasAnchor">
<h3><span class="header-section-number">9.5.1</span> Exercise (conditional expressions)<a href="mod-r-loops-cond.html#ex-r-conditional-expressions" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><em>Solve this exercise using a script file</em></p>
<ol style="list-style-type: decimal">
<li><p>Consider object <code>x</code>:</p>
<div class="sourceCode" id="cb301"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb301-1"><a href="mod-r-loops-cond.html#cb301-1"></a>x &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="op">-</span><span class="dv">3</span>,<span class="dv">4</span>)</span></code></pre></div>
<p>What will this conditional expression return?</p>
<div class="sourceCode" id="cb302"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb302-1"><a href="mod-r-loops-cond.html#cb302-1"></a><span class="cf">if</span>(<span class="kw">all</span>(x<span class="op">&gt;</span><span class="dv">0</span>)){</span>
<span id="cb302-2"><a href="mod-r-loops-cond.html#cb302-2"></a> <span class="kw">print</span>(<span class="st">&quot;All Postives&quot;</span>)</span>
<span id="cb302-3"><a href="mod-r-loops-cond.html#cb302-3"></a>} <span class="cf">else</span> {</span>
<span id="cb302-4"><a href="mod-r-loops-cond.html#cb302-4"></a> <span class="kw">print</span>(<span class="st">&quot;Not all positives&quot;</span>)</span>
<span id="cb302-5"><a href="mod-r-loops-cond.html#cb302-5"></a>}</span></code></pre></div></li>
<li><p>What will the following expressions return?</p>
<div class="sourceCode" id="cb303"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb303-1"><a href="mod-r-loops-cond.html#cb303-1"></a>x &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="ot">TRUE</span>, <span class="ot">FALSE</span>, <span class="ot">TRUE</span>, <span class="ot">TRUE</span>)</span>
<span id="cb303-2"><a href="mod-r-loops-cond.html#cb303-2"></a><span class="kw">all</span>(x)</span>
<span id="cb303-3"><a href="mod-r-loops-cond.html#cb303-3"></a><span class="kw">any</span>(x)</span>
<span id="cb303-4"><a href="mod-r-loops-cond.html#cb303-4"></a><span class="kw">any</span>(<span class="op">!</span>x)</span>
<span id="cb303-5"><a href="mod-r-loops-cond.html#cb303-5"></a><span class="kw">all</span>(<span class="op">!</span>x)</span></code></pre></div></li>
<li><p>Which of the expressions above is always <code>FALSE</code> when at least one entry of a logical vector <code>x</code> is TRUE?</p></li>
</ol>
<p>Consider vector:</p>
<div class="sourceCode" id="cb304"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb304-1"><a href="mod-r-loops-cond.html#cb304-1"></a><span class="kw">library</span>(tidyverse)</span>
<span id="cb304-2"><a href="mod-r-loops-cond.html#cb304-2"></a>x &lt;-<span class="st"> </span><span class="dv">1</span><span class="op">:</span><span class="dv">15</span></span>
<span id="cb304-3"><a href="mod-r-loops-cond.html#cb304-3"></a>x</span>
<span id="cb304-4"><a href="mod-r-loops-cond.html#cb304-4"></a><span class="co">#&gt;  [1]  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15</span></span></code></pre></div>
<div id="VDNCSE74gH9yPOeuDXiO" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="VDNCSE74gH9yPOeuDXiO-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="VDNCSE74gH9yPOeuDXiO-title">
Solution
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb305"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb305-1"><a href="mod-r-loops-cond.html#cb305-1"></a><span class="kw">if_else</span>(x <span class="op">&lt;</span><span class="st"> </span><span class="dv">7</span>, <span class="kw">as.integer</span>(<span class="dv">0</span>), x)</span>
<span id="cb305-2"><a href="mod-r-loops-cond.html#cb305-2"></a><span class="co">#&gt;  [1]  0  0  0  0  0  0  7  8  9 10 11 12 13 14 15</span></span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#VDNCSE74gH9yPOeuDXiO">
Solution
</button>
<div id="5d0Dgrn8Omga7YRl1Cs6" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="5d0Dgrn8Omga7YRl1Cs6-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="5d0Dgrn8Omga7YRl1Cs6-title">
Hint
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb306"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb306-1"><a href="mod-r-loops-cond.html#cb306-1"></a><span class="kw">if_else</span>(x <span class="op">&lt;</span><span class="st"> </span><span class="dv">7</span>, <span class="kw">as.integer</span>(___), ___)</span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#5d0Dgrn8Omga7YRl1Cs6">
Hint
</button>
<ol start="4" style="list-style-type: decimal">
<li>Use the <code>if_else</code> function to set elements with value below 7 to 0.</li>
</ol>
<div id="yNrtUiUz49mXPzFV4oNn" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="yNrtUiUz49mXPzFV4oNn-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="yNrtUiUz49mXPzFV4oNn-title">
Solution
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb307"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb307-1"><a href="mod-r-loops-cond.html#cb307-1"></a><span class="kw">if_else</span>(x <span class="op">&lt;</span><span class="st"> </span><span class="dv">7</span> <span class="op">|</span><span class="st"> </span>x <span class="op">&gt;</span><span class="st"> </span><span class="dv">10</span>, <span class="ot">NA_integer_</span>, x)</span>
<span id="cb307-2"><a href="mod-r-loops-cond.html#cb307-2"></a><span class="co">#&gt;  [1] NA NA NA NA NA NA  7  8  9 10 NA NA NA NA NA</span></span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#yNrtUiUz49mXPzFV4oNn">
Solution
</button>
<div id="CwLW6sx2UErW0HKaF26h" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="CwLW6sx2UErW0HKaF26h-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="CwLW6sx2UErW0HKaF26h-title">
Hint
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb308"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb308-1"><a href="mod-r-loops-cond.html#cb308-1"></a><span class="kw">if_else</span>(___, <span class="ot">NA_integer_</span>, ___)</span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#CwLW6sx2UErW0HKaF26h">
Hint
</button>
<ol start="5" style="list-style-type: decimal">
<li>Use the <code>if_else</code> function to set elements with value below 7 or above 10 to <code>NA_integer_</code> (which is the NA/missing value of an integer).</li>
</ol>
<div id="wJ4JcRnHZ2BjpVZ08r5F" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="wJ4JcRnHZ2BjpVZ08r5F-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="wJ4JcRnHZ2BjpVZ08r5F-title">
Solution
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb309"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb309-1"><a href="mod-r-loops-cond.html#cb309-1"></a>x &lt;-<span class="st"> </span><span class="kw">sample</span>(<span class="kw">c</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">10</span>,<span class="ot">NA</span>,<span class="fl">5.5</span>), <span class="dv">1</span>)</span>
<span id="cb309-2"><a href="mod-r-loops-cond.html#cb309-2"></a><span class="cf">if</span> (<span class="kw">is.na</span>(x)) {</span>
<span id="cb309-3"><a href="mod-r-loops-cond.html#cb309-3"></a>  y &lt;-<span class="st"> &quot;missing&quot;</span></span>
<span id="cb309-4"><a href="mod-r-loops-cond.html#cb309-4"></a>} <span class="cf">else</span> <span class="cf">if</span> (x <span class="op">%%</span><span class="st"> </span><span class="dv">2</span> <span class="op">==</span><span class="st"> </span><span class="dv">0</span>) {</span>
<span id="cb309-5"><a href="mod-r-loops-cond.html#cb309-5"></a>  y &lt;-<span class="st"> &quot;even&quot;</span></span>
<span id="cb309-6"><a href="mod-r-loops-cond.html#cb309-6"></a>} <span class="cf">else</span> <span class="cf">if</span> (x <span class="op">%%</span><span class="st"> </span><span class="dv">2</span> <span class="op">==</span><span class="st"> </span><span class="dv">1</span>) {</span>
<span id="cb309-7"><a href="mod-r-loops-cond.html#cb309-7"></a>  y &lt;-<span class="st"> &quot;odd&quot;</span></span>
<span id="cb309-8"><a href="mod-r-loops-cond.html#cb309-8"></a>} <span class="cf">else</span> <span class="cf">if</span> (x <span class="op">%%</span><span class="st"> </span><span class="dv">1</span> <span class="op">&gt;</span><span class="st"> </span><span class="dv">0</span>) {</span>
<span id="cb309-9"><a href="mod-r-loops-cond.html#cb309-9"></a>  y &lt;-<span class="st"> &quot;decimal&quot;</span></span>
<span id="cb309-10"><a href="mod-r-loops-cond.html#cb309-10"></a>} </span>
<span id="cb309-11"><a href="mod-r-loops-cond.html#cb309-11"></a>x</span>
<span id="cb309-12"><a href="mod-r-loops-cond.html#cb309-12"></a><span class="co">#&gt; [1] 7</span></span>
<span id="cb309-13"><a href="mod-r-loops-cond.html#cb309-13"></a>y</span>
<span id="cb309-14"><a href="mod-r-loops-cond.html#cb309-14"></a><span class="co">#&gt; [1] &quot;odd&quot;</span></span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#wJ4JcRnHZ2BjpVZ08r5F">
Solution
</button>
<div id="ZFc19h4cw5y1iSZsYjcJ" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="ZFc19h4cw5y1iSZsYjcJ-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="ZFc19h4cw5y1iSZsYjcJ-title">
Hint
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb310"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb310-1"><a href="mod-r-loops-cond.html#cb310-1"></a>x &lt;-<span class="st"> </span><span class="kw">sample</span>(<span class="kw">c</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">10</span>,<span class="ot">NA</span>,<span class="fl">5.5</span>), <span class="dv">1</span>)</span>
<span id="cb310-2"><a href="mod-r-loops-cond.html#cb310-2"></a><span class="cf">if</span> (<span class="kw">is.na</span>(x)) {</span>
<span id="cb310-3"><a href="mod-r-loops-cond.html#cb310-3"></a>  y &lt;-<span class="st"> </span>___</span>
<span id="cb310-4"><a href="mod-r-loops-cond.html#cb310-4"></a>} <span class="cf">else</span> <span class="cf">if</span> (x <span class="op">%%</span><span class="st"> </span><span class="dv">2</span> <span class="op">==</span><span class="st"> </span><span class="dv">0</span>) {</span>
<span id="cb310-5"><a href="mod-r-loops-cond.html#cb310-5"></a>  ___</span>
<span id="cb310-6"><a href="mod-r-loops-cond.html#cb310-6"></a>} <span class="cf">else</span> <span class="cf">if</span> (___) {</span>
<span id="cb310-7"><a href="mod-r-loops-cond.html#cb310-7"></a>  ___</span>
<span id="cb310-8"><a href="mod-r-loops-cond.html#cb310-8"></a>} <span class="cf">else</span> <span class="cf">if</span> (___) {</span>
<span id="cb310-9"><a href="mod-r-loops-cond.html#cb310-9"></a>  y &lt;-<span class="st"> &quot;decimal&quot;</span></span>
<span id="cb310-10"><a href="mod-r-loops-cond.html#cb310-10"></a>} </span>
<span id="cb310-11"><a href="mod-r-loops-cond.html#cb310-11"></a>x</span>
<span id="cb310-12"><a href="mod-r-loops-cond.html#cb310-12"></a>y</span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#ZFc19h4cw5y1iSZsYjcJ">
Hint
</button>
<ol start="6" style="list-style-type: decimal">
<li><p>Consider code</p>
<div class="sourceCode" id="cb311"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb311-1"><a href="mod-r-loops-cond.html#cb311-1"></a>x &lt;-<span class="st"> </span><span class="kw">sample</span>(<span class="kw">c</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">10</span>,<span class="ot">NA</span>,<span class="fl">5.5</span>), <span class="dv">1</span>)</span>
<span id="cb311-2"><a href="mod-r-loops-cond.html#cb311-2"></a>x</span>
<span id="cb311-3"><a href="mod-r-loops-cond.html#cb311-3"></a><span class="co">#&gt; [1] 7</span></span></code></pre></div>
<p>which generates a number from the vector <code>c(1:10,NA,5.5)</code>.</p>
<p>Write code which set object <code>y</code> equal to “even” if <code>x</code> is even, “odd” if <code>x</code> is odd, “decimal” if <code>x</code> has a decimal not zero and “missing” if <code>x</code> is <code>NA</code>. Hint: have a look at <code>?'%%'</code> (the modulo operator).</p></li>
</ol>
</div>
<div id="ex-r-loops" class="section level3 hasAnchor">
<h3><span class="header-section-number">9.5.2</span> Exercise (loops)<a href="mod-r-loops-cond.html#ex-r-loops" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="CqbkYHjYLVoWCqMIljqZ" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="CqbkYHjYLVoWCqMIljqZ-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="CqbkYHjYLVoWCqMIljqZ-title">
Solution
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb312"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb312-1"><a href="mod-r-loops-cond.html#cb312-1"></a>x &lt;-<span class="st"> </span><span class="kw">rep</span>(<span class="ot">NA</span>,<span class="dv">4</span>)</span>
<span id="cb312-2"><a href="mod-r-loops-cond.html#cb312-2"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="dv">4</span>) {</span>
<span id="cb312-3"><a href="mod-r-loops-cond.html#cb312-3"></a>  x[i] &lt;-<span class="st"> </span><span class="dv">2</span> <span class="op">*</span><span class="st"> </span>i <span class="op">+</span><span class="st"> </span><span class="dv">4</span></span>
<span id="cb312-4"><a href="mod-r-loops-cond.html#cb312-4"></a>}</span>
<span id="cb312-5"><a href="mod-r-loops-cond.html#cb312-5"></a>x</span>
<span id="cb312-6"><a href="mod-r-loops-cond.html#cb312-6"></a><span class="co">#&gt; [1]  6  8 10 12</span></span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#CqbkYHjYLVoWCqMIljqZ">
Solution
</button>
<div id="1UXpjY48g6CMqEh6mFX2" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="1UXpjY48g6CMqEh6mFX2-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="1UXpjY48g6CMqEh6mFX2-title">
Hint
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb313"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb313-1"><a href="mod-r-loops-cond.html#cb313-1"></a>x &lt;-<span class="st"> </span><span class="kw">rep</span>(<span class="ot">NA</span>,<span class="dv">4</span>)</span>
<span id="cb313-2"><a href="mod-r-loops-cond.html#cb313-2"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="dv">4</span>) {</span>
<span id="cb313-3"><a href="mod-r-loops-cond.html#cb313-3"></a>  x[i] &lt;-<span class="st"> </span>___</span>
<span id="cb313-4"><a href="mod-r-loops-cond.html#cb313-4"></a>}</span>
<span id="cb313-5"><a href="mod-r-loops-cond.html#cb313-5"></a>x</span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#1UXpjY48g6CMqEh6mFX2">
Hint
</button>
<ol style="list-style-type: decimal">
<li>Using a <code>for</code> loop, create a vector having values <span class="math inline">\(2i + 4\)</span> given <span class="math inline">\(i=1\ldots 4\)</span>.</li>
</ol>
<div id="nKuMyNUU0dVJacRAikqX" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="nKuMyNUU0dVJacRAikqX-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="nKuMyNUU0dVJacRAikqX-title">
Solution
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb314"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb314-1"><a href="mod-r-loops-cond.html#cb314-1"></a>i_val &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">2</span>, <span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">12</span>)</span>
<span id="cb314-2"><a href="mod-r-loops-cond.html#cb314-2"></a>x &lt;-<span class="st"> </span><span class="kw">rep</span>(<span class="ot">NA</span>, <span class="kw">length</span>(i_val))</span>
<span id="cb314-3"><a href="mod-r-loops-cond.html#cb314-3"></a><span class="cf">for</span> (idx <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">length</span>(i_val)) {</span>
<span id="cb314-4"><a href="mod-r-loops-cond.html#cb314-4"></a>  x[idx] &lt;-<span class="st"> </span><span class="dv">2</span> <span class="op">*</span><span class="st"> </span>i_val[idx] <span class="op">+</span><span class="st"> </span><span class="dv">4</span></span>
<span id="cb314-5"><a href="mod-r-loops-cond.html#cb314-5"></a>}</span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#nKuMyNUU0dVJacRAikqX">
Solution
</button>
<div id="ISNFexIeXb10815TCoFU" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="ISNFexIeXb10815TCoFU-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="ISNFexIeXb10815TCoFU-title">
Hint
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb315"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb315-1"><a href="mod-r-loops-cond.html#cb315-1"></a>i_val &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">2</span>, <span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">12</span>)</span>
<span id="cb315-2"><a href="mod-r-loops-cond.html#cb315-2"></a>x &lt;-<span class="st"> </span><span class="kw">rep</span>(<span class="ot">NA</span>, <span class="kw">length</span>(i_val))</span>
<span id="cb315-3"><a href="mod-r-loops-cond.html#cb315-3"></a><span class="cf">for</span> (idx <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">length</span>(i_val)) {</span>
<span id="cb315-4"><a href="mod-r-loops-cond.html#cb315-4"></a>  x[idx] &lt;-<span class="st"> </span>___</span>
<span id="cb315-5"><a href="mod-r-loops-cond.html#cb315-5"></a>}</span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#ISNFexIeXb10815TCoFU">
Hint
</button>
<ol start="2" style="list-style-type: decimal">
<li>Using a <code>for</code> loop, create a vector having values <span class="math inline">\(2i + 4\)</span> given <span class="math inline">\(i=2,5,6,12\)</span>.</li>
</ol>
<div id="e9pREI9a9BLBPcgpNx1b" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="e9pREI9a9BLBPcgpNx1b-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="e9pREI9a9BLBPcgpNx1b-title">
Solution
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb316"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb316-1"><a href="mod-r-loops-cond.html#cb316-1"></a>i_val &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">2</span>, <span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">12</span>)</span>
<span id="cb316-2"><a href="mod-r-loops-cond.html#cb316-2"></a>x &lt;-<span class="st"> </span><span class="kw">rep</span>(<span class="ot">NA</span>, <span class="kw">length</span>(i_val))</span>
<span id="cb316-3"><a href="mod-r-loops-cond.html#cb316-3"></a>idx &lt;-<span class="st"> </span><span class="dv">1</span></span>
<span id="cb316-4"><a href="mod-r-loops-cond.html#cb316-4"></a><span class="cf">while</span> (idx <span class="op">&lt;</span><span class="st"> </span><span class="dv">5</span>) {</span>
<span id="cb316-5"><a href="mod-r-loops-cond.html#cb316-5"></a>  x[idx] &lt;-<span class="st"> </span><span class="dv">2</span> <span class="op">*</span><span class="st"> </span>i_val[idx] <span class="op">+</span><span class="st"> </span><span class="dv">4</span></span>
<span id="cb316-6"><a href="mod-r-loops-cond.html#cb316-6"></a>  idx &lt;-<span class="st"> </span>idx <span class="op">+</span><span class="st"> </span><span class="dv">1</span></span>
<span id="cb316-7"><a href="mod-r-loops-cond.html#cb316-7"></a>}</span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#e9pREI9a9BLBPcgpNx1b">
Solution
</button>
<div id="SLs4sBDr3EzgRNSnfS3E" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="SLs4sBDr3EzgRNSnfS3E-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="SLs4sBDr3EzgRNSnfS3E-title">
Hint
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb317"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb317-1"><a href="mod-r-loops-cond.html#cb317-1"></a>i_val &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">2</span>, <span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">12</span>)</span>
<span id="cb317-2"><a href="mod-r-loops-cond.html#cb317-2"></a>x &lt;-<span class="st"> </span><span class="kw">rep</span>(<span class="ot">NA</span>, <span class="kw">length</span>(i_val))</span>
<span id="cb317-3"><a href="mod-r-loops-cond.html#cb317-3"></a>idx &lt;-<span class="st"> </span><span class="dv">1</span></span>
<span id="cb317-4"><a href="mod-r-loops-cond.html#cb317-4"></a><span class="cf">while</span> (idx <span class="op">&lt;</span><span class="st"> </span><span class="dv">5</span>) {</span>
<span id="cb317-5"><a href="mod-r-loops-cond.html#cb317-5"></a>  x[idx] &lt;-<span class="st"> </span>___</span>
<span id="cb317-6"><a href="mod-r-loops-cond.html#cb317-6"></a>  idx &lt;-<span class="st"> </span>___</span>
<span id="cb317-7"><a href="mod-r-loops-cond.html#cb317-7"></a>}</span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#SLs4sBDr3EzgRNSnfS3E">
Hint
</button>
<ol start="3" style="list-style-type: decimal">
<li>Solve Question 2 using a <code>while</code> loop.</li>
</ol>
<div id="EE3UFlXw5wivc9BjaJlK" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="EE3UFlXw5wivc9BjaJlK-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="EE3UFlXw5wivc9BjaJlK-title">
Solution
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb318"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb318-1"><a href="mod-r-loops-cond.html#cb318-1"></a><span class="dv">2</span> <span class="op">*</span><span class="st"> </span><span class="dv">1</span><span class="op">:</span><span class="dv">4</span> <span class="op">+</span><span class="st"> </span><span class="dv">4</span>             <span class="co"># Q1</span></span>
<span id="cb318-2"><a href="mod-r-loops-cond.html#cb318-2"></a><span class="co">#&gt; [1]  6  8 10 12</span></span>
<span id="cb318-3"><a href="mod-r-loops-cond.html#cb318-3"></a><span class="dv">2</span><span class="op">*</span><span class="st"> </span><span class="kw">c</span>(<span class="dv">2</span>, <span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">12</span>) <span class="op">+</span><span class="st"> </span><span class="dv">4</span>   <span class="co"># Q2</span></span>
<span id="cb318-4"><a href="mod-r-loops-cond.html#cb318-4"></a><span class="co">#&gt; [1]  8 14 16 28</span></span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#EE3UFlXw5wivc9BjaJlK">
Solution
</button>
<div id="rZPvS6SzvQrInnNNereW" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="rZPvS6SzvQrInnNNereW-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="rZPvS6SzvQrInnNNereW-title">
Hint
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb319"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb319-1"><a href="mod-r-loops-cond.html#cb319-1"></a><span class="dv">2</span> <span class="op">*</span><span class="st"> </span>___ <span class="op">+</span><span class="st"> </span><span class="dv">4</span>             <span class="co"># Q1</span></span>
<span id="cb319-2"><a href="mod-r-loops-cond.html#cb319-2"></a>___   <span class="co"># Q2</span></span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#rZPvS6SzvQrInnNNereW">
Hint
</button>
<ol start="4" style="list-style-type: decimal">
<li>Solve Questions 1 and 2 using a vectorized alternative.</li>
</ol>
</div>
<div id="ex-r-search-vector" class="section level3 hasAnchor">
<h3><span class="header-section-number">9.5.3</span> Exercise (search vector)<a href="mod-r-loops-cond.html#ex-r-search-vector" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><em>This exercise is a slightly modified version an exam assignment (reexam 2021-A1).</em></p>
<p>Consider the vector:</p>
<div class="sourceCode" id="cb320"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb320-1"><a href="mod-r-loops-cond.html#cb320-1"></a>v &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">9</span>, <span class="dv">19</span>, <span class="dv">2</span>, <span class="dv">8</span>, <span class="ot">NA</span>, <span class="dv">12</span>, <span class="dv">9</span>, <span class="dv">23</span>, <span class="ot">NA</span>, <span class="dv">34</span>)</span>
<span id="cb320-2"><a href="mod-r-loops-cond.html#cb320-2"></a>v</span>
<span id="cb320-3"><a href="mod-r-loops-cond.html#cb320-3"></a><span class="co">#&gt;  [1]  9 19  2  8 NA 12  9 23 NA 34</span></span></code></pre></div>
<!-- Q1 -->
<div id="9b2Ujk3RVGbji7ZnEip7" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="9b2Ujk3RVGbji7ZnEip7-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="9b2Ujk3RVGbji7ZnEip7-title">
Solution
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb321"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb321-1"><a href="mod-r-loops-cond.html#cb321-1"></a><span class="kw">any</span>(v <span class="op">&lt;=</span><span class="st"> </span><span class="dv">2</span>)</span>
<span id="cb321-2"><a href="mod-r-loops-cond.html#cb321-2"></a><span class="co">#&gt; [1] TRUE</span></span></code></pre></div>
<p>
Yes since the vector contains 2.
</p>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#9b2Ujk3RVGbji7ZnEip7">
Solution
</button>
<ol style="list-style-type: decimal">
<li>Is any of the entries in <code>v</code> below or equal to 2?</li>
</ol>
<!-- Q2 -->
<div id="xkoB1ru8TSh4jOSiTzqp" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="xkoB1ru8TSh4jOSiTzqp-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="xkoB1ru8TSh4jOSiTzqp-title">
Solution
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb322"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb322-1"><a href="mod-r-loops-cond.html#cb322-1"></a><span class="kw">all</span>(v <span class="op">&gt;=</span><span class="st"> </span><span class="dv">2</span>)</span>
<span id="cb322-2"><a href="mod-r-loops-cond.html#cb322-2"></a><span class="co">#&gt; [1] NA</span></span></code></pre></div>
<p>
We don't know since we have missing values.
</p>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#xkoB1ru8TSh4jOSiTzqp">
Solution
</button>
<ol start="2" style="list-style-type: decimal">
<li>Is all of the entries in <code>v</code> above or equal to 2?</li>
</ol>
<!-- Q3 -->
<div id="l6qoz2kPap00zlJozCeR" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="l6qoz2kPap00zlJozCeR-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="l6qoz2kPap00zlJozCeR-title">
Solution
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb323"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb323-1"><a href="mod-r-loops-cond.html#cb323-1"></a><span class="kw">any</span>(<span class="kw">is.na</span>(v))</span>
<span id="cb323-2"><a href="mod-r-loops-cond.html#cb323-2"></a><span class="co">#&gt; [1] TRUE</span></span></code></pre></div>
<p>
Yes, since <code>v</code> contains <code>NA</code> values.
</p>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#l6qoz2kPap00zlJozCeR">
Solution
</button>
<ol start="3" style="list-style-type: decimal">
<li>Does <code>v</code> have missing values?</li>
</ol>
<!-- Q4 -->
<div id="wzSEhYaQQbSxqDQQ1NQB" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="wzSEhYaQQbSxqDQQ1NQB-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="wzSEhYaQQbSxqDQQ1NQB-title">
Solution
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb324"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb324-1"><a href="mod-r-loops-cond.html#cb324-1"></a><span class="kw">which</span>(v <span class="op">&gt;</span><span class="st"> </span><span class="dv">10</span>)</span>
<span id="cb324-2"><a href="mod-r-loops-cond.html#cb324-2"></a><span class="co">#&gt; [1]  2  6  8 10</span></span></code></pre></div>
<p>
The indicies are show above.
</p>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#wzSEhYaQQbSxqDQQ1NQB">
Solution
</button>
<ol start="4" style="list-style-type: decimal">
<li>Which entries in <code>v</code> are above 10? You must return the indices, e.g. the index of <code>v[3]</code> is 3.</li>
</ol>
<!-- Q5 -->
<div id="h0jQj02PdDphtPPFNEvT" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="h0jQj02PdDphtPPFNEvT-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="h0jQj02PdDphtPPFNEvT-title">
Solution
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb325"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb325-1"><a href="mod-r-loops-cond.html#cb325-1"></a>res &lt;-<span class="st"> </span><span class="kw">if_else</span>(v <span class="op">&lt;</span><span class="st"> </span><span class="dv">10</span>, v, <span class="dv">0</span>, <span class="dv">0</span>)</span>
<span id="cb325-2"><a href="mod-r-loops-cond.html#cb325-2"></a>res</span>
<span id="cb325-3"><a href="mod-r-loops-cond.html#cb325-3"></a><span class="co">#&gt;  [1] 9 0 2 8 0 0 9 0 0 0</span></span></code></pre></div>
<p>
We use <code>if_else</code> to set values.
</p>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#h0jQj02PdDphtPPFNEvT">
Solution
</button>
<ol start="5" style="list-style-type: decimal">
<li>Create a vector <code>res</code> where <code>res[i]</code> is equal to <code>v[i]</code> if <code>v[i]</code> is less than 10 and otherwise zero (also if <code>v[i]</code> is <code>NA</code>).</li>
</ol>
</div>
<div id="ex-dist" class="section level3 hasAnchor">
<h3><span class="header-section-number">9.5.4</span> Exercise (calculating distances)<a href="mod-r-loops-cond.html#ex-dist" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Consider zip codes in Jutland:</p>
<div class="sourceCode" id="cb326"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb326-1"><a href="mod-r-loops-cond.html#cb326-1"></a><span class="co"># remotes::install_github(&quot;bss-osca/tfa/tfa-package&quot;, upgrade = FALSE)  # run to upgrade</span></span>
<span id="cb326-2"><a href="mod-r-loops-cond.html#cb326-2"></a><span class="kw">library</span>(tidyverse)</span>
<span id="cb326-3"><a href="mod-r-loops-cond.html#cb326-3"></a><span class="kw">data</span>(zips, <span class="dt">package =</span> <span class="st">&quot;tfa&quot;</span>)  <span class="co"># load the zips data from the tfa package</span></span>
<span id="cb326-4"><a href="mod-r-loops-cond.html#cb326-4"></a>zips</span>
<span id="cb326-5"><a href="mod-r-loops-cond.html#cb326-5"></a><span class="co">#&gt; # A tibble: 376 × 2</span></span>
<span id="cb326-6"><a href="mod-r-loops-cond.html#cb326-6"></a><span class="co">#&gt;      Zip Area           </span></span>
<span id="cb326-7"><a href="mod-r-loops-cond.html#cb326-7"></a><span class="co">#&gt;    &lt;dbl&gt; &lt;chr&gt;          </span></span>
<span id="cb326-8"><a href="mod-r-loops-cond.html#cb326-8"></a><span class="co">#&gt;  1  5320 &quot;Agedrup&quot;      </span></span>
<span id="cb326-9"><a href="mod-r-loops-cond.html#cb326-9"></a><span class="co">#&gt;  2  6753 &quot;Agerb\xe6k&quot;   </span></span>
<span id="cb326-10"><a href="mod-r-loops-cond.html#cb326-10"></a><span class="co">#&gt;  3  6534 &quot;Agerskov&quot;     </span></span>
<span id="cb326-11"><a href="mod-r-loops-cond.html#cb326-11"></a><span class="co">#&gt;  4  8961 &quot;Alling\xe5bro&quot;</span></span>
<span id="cb326-12"><a href="mod-r-loops-cond.html#cb326-12"></a><span class="co">#&gt;  5  6051 &quot;Almind&quot;       </span></span>
<span id="cb326-13"><a href="mod-r-loops-cond.html#cb326-13"></a><span class="co">#&gt;  6  8592 &quot;Anholt&quot;       </span></span>
<span id="cb326-14"><a href="mod-r-loops-cond.html#cb326-14"></a><span class="co">#&gt;  7  8643 &quot;Ans By&quot;       </span></span>
<span id="cb326-15"><a href="mod-r-loops-cond.html#cb326-15"></a><span class="co">#&gt;  8  6823 &quot;Ansager&quot;      </span></span>
<span id="cb326-16"><a href="mod-r-loops-cond.html#cb326-16"></a><span class="co">#&gt;  9  9510 &quot;Arden&quot;        </span></span>
<span id="cb326-17"><a href="mod-r-loops-cond.html#cb326-17"></a><span class="co">#&gt; 10  5466 &quot;Asperup&quot;      </span></span>
<span id="cb326-18"><a href="mod-r-loops-cond.html#cb326-18"></a><span class="co">#&gt; # … with 366 more rows</span></span>
<span id="cb326-19"><a href="mod-r-loops-cond.html#cb326-19"></a><span class="co">#&gt; # ℹ Use `print(n = ...)` to see more rows</span></span></code></pre></div>
<p>We want to calculate distances between a subset of zip areas:</p>
<div class="sourceCode" id="cb327"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb327-1"><a href="mod-r-loops-cond.html#cb327-1"></a>idx &lt;-<span class="st"> </span><span class="dv">1</span><span class="op">:</span><span class="dv">5</span></span>
<span id="cb327-2"><a href="mod-r-loops-cond.html#cb327-2"></a>dat &lt;-<span class="st"> </span>zips[idx,]</span>
<span id="cb327-3"><a href="mod-r-loops-cond.html#cb327-3"></a>dat</span>
<span id="cb327-4"><a href="mod-r-loops-cond.html#cb327-4"></a><span class="co">#&gt; # A tibble: 5 × 2</span></span>
<span id="cb327-5"><a href="mod-r-loops-cond.html#cb327-5"></a><span class="co">#&gt;     Zip Area           </span></span>
<span id="cb327-6"><a href="mod-r-loops-cond.html#cb327-6"></a><span class="co">#&gt;   &lt;dbl&gt; &lt;chr&gt;          </span></span>
<span id="cb327-7"><a href="mod-r-loops-cond.html#cb327-7"></a><span class="co">#&gt; 1  5320 &quot;Agedrup&quot;      </span></span>
<span id="cb327-8"><a href="mod-r-loops-cond.html#cb327-8"></a><span class="co">#&gt; 2  6753 &quot;Agerb\xe6k&quot;   </span></span>
<span id="cb327-9"><a href="mod-r-loops-cond.html#cb327-9"></a><span class="co">#&gt; 3  6534 &quot;Agerskov&quot;     </span></span>
<span id="cb327-10"><a href="mod-r-loops-cond.html#cb327-10"></a><span class="co">#&gt; 4  8961 &quot;Alling\xe5bro&quot;</span></span>
<span id="cb327-11"><a href="mod-r-loops-cond.html#cb327-11"></a><span class="co">#&gt; 5  6051 &quot;Almind&quot;</span></span>
<span id="cb327-12"><a href="mod-r-loops-cond.html#cb327-12"></a>distanceMat &lt;-<span class="st"> </span><span class="kw">matrix</span>(<span class="ot">NA</span>, <span class="dt">nrow =</span> <span class="kw">length</span>(idx), <span class="dt">ncol =</span> <span class="kw">length</span>(idx))</span>
<span id="cb327-13"><a href="mod-r-loops-cond.html#cb327-13"></a><span class="kw">colnames</span>(distanceMat) &lt;-<span class="st"> </span><span class="kw">str_c</span>(dat<span class="op">$</span>Zip[idx], dat<span class="op">$</span>Area[idx], <span class="dt">sep =</span> <span class="st">&quot; &quot;</span>) </span>
<span id="cb327-14"><a href="mod-r-loops-cond.html#cb327-14"></a><span class="kw">rownames</span>(distanceMat) &lt;-<span class="st"> </span><span class="kw">colnames</span>(distanceMat)</span>
<span id="cb327-15"><a href="mod-r-loops-cond.html#cb327-15"></a>distanceMat</span>
<span id="cb327-16"><a href="mod-r-loops-cond.html#cb327-16"></a><span class="co">#&gt;                    5320 Agedrup 6753 Agerb\xe6k 6534 Agerskov 8961 Alling\xe5bro 6051 Almind</span></span>
<span id="cb327-17"><a href="mod-r-loops-cond.html#cb327-17"></a><span class="co">#&gt; 5320 Agedrup                 NA              NA            NA                 NA          NA</span></span>
<span id="cb327-18"><a href="mod-r-loops-cond.html#cb327-18"></a><span class="co">#&gt; 6753 Agerb\xe6k              NA              NA            NA                 NA          NA</span></span>
<span id="cb327-19"><a href="mod-r-loops-cond.html#cb327-19"></a><span class="co">#&gt; 6534 Agerskov                NA              NA            NA                 NA          NA</span></span>
<span id="cb327-20"><a href="mod-r-loops-cond.html#cb327-20"></a><span class="co">#&gt; 8961 Alling\xe5bro           NA              NA            NA                 NA          NA</span></span>
<span id="cb327-21"><a href="mod-r-loops-cond.html#cb327-21"></a><span class="co">#&gt; 6051 Almind                  NA              NA            NA                 NA          NA</span></span></code></pre></div>
<p>We can find average distances between two zip codes (here rows 1 and 2 in <code>dat</code>) using Bing maps:</p>
<div class="sourceCode" id="cb328"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb328-1"><a href="mod-r-loops-cond.html#cb328-1"></a>key &lt;-<span class="st"> &quot;AlUJdApmvPe8y2_IMrC4j4x8fzytbD2M0SvlmpemL09ae_CWS6-IuNSgrAtXoyeP&quot;</span></span>
<span id="cb328-2"><a href="mod-r-loops-cond.html#cb328-2"></a>url &lt;-<span class="st"> </span><span class="kw">str_c</span>(<span class="st">&quot;http://dev.virtualearth.net/REST/V1/Routes/Driving?wp.0=&quot;</span>,</span>
<span id="cb328-3"><a href="mod-r-loops-cond.html#cb328-3"></a>             dat<span class="op">$</span>Zip[<span class="dv">1</span>], <span class="st">&quot;,Denmark&quot;</span>,</span>
<span id="cb328-4"><a href="mod-r-loops-cond.html#cb328-4"></a>             <span class="st">&quot;&amp;wp.1=&quot;</span>,</span>
<span id="cb328-5"><a href="mod-r-loops-cond.html#cb328-5"></a>             dat<span class="op">$</span>Zip[<span class="dv">2</span>], <span class="st">&quot;,Denmark&quot;</span>,</span>
<span id="cb328-6"><a href="mod-r-loops-cond.html#cb328-6"></a>             <span class="st">&quot;&amp;avoid=minimizeTolls&amp;key=&quot;</span>, key)</span>
<span id="cb328-7"><a href="mod-r-loops-cond.html#cb328-7"></a><span class="kw">library</span>(jsonlite)</span>
<span id="cb328-8"><a href="mod-r-loops-cond.html#cb328-8"></a>lst &lt;-<span class="st"> </span>jsonlite<span class="op">::</span><span class="kw">fromJSON</span>(url)</span>
<span id="cb328-9"><a href="mod-r-loops-cond.html#cb328-9"></a>dist &lt;-<span class="st"> </span>lst<span class="op">$</span>resourceSets<span class="op">$</span>resources[[<span class="dv">1</span>]]<span class="op">$</span>travelDistance</span>
<span id="cb328-10"><a href="mod-r-loops-cond.html#cb328-10"></a>dist</span>
<span id="cb328-11"><a href="mod-r-loops-cond.html#cb328-11"></a><span class="co">#&gt; [1] 138</span></span>
<span id="cb328-12"><a href="mod-r-loops-cond.html#cb328-12"></a>lst<span class="op">$</span>statusCode</span>
<span id="cb328-13"><a href="mod-r-loops-cond.html#cb328-13"></a><span class="co">#&gt; [1] 200</span></span>
<span id="cb328-14"><a href="mod-r-loops-cond.html#cb328-14"></a>lst<span class="op">$</span>statusDescription</span>
<span id="cb328-15"><a href="mod-r-loops-cond.html#cb328-15"></a><span class="co">#&gt; [1] &quot;OK&quot;</span></span></code></pre></div>
<p>Note we call the Bing maps API with the two zip codes. A <a href="https://en.wikipedia.org/wiki/JSON">json file</a> is returned and stored in a list. To get the average travel distance we access <code>travelDistance</code>. The status code should be 200 if the calculation returned is okay.</p>
<div id="2lKYfH3Qbyy5UOOJgHOz" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="2lKYfH3Qbyy5UOOJgHOz-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="2lKYfH3Qbyy5UOOJgHOz-title">
Solution
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb329"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb329-1"><a href="mod-r-loops-cond.html#cb329-1"></a>key &lt;-<span class="st"> &quot;AlUJdApmvPe8y2_IMrC4j4x8fzytbD2M0SvlmpemL09ae_CWS6-IuNSgrAtXoyeP&quot;</span></span>
<span id="cb329-2"><a href="mod-r-loops-cond.html#cb329-2"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(distanceMat)) {</span>
<span id="cb329-3"><a href="mod-r-loops-cond.html#cb329-3"></a>   <span class="cf">for</span>(j <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">ncol</span>(distanceMat)) {</span>
<span id="cb329-4"><a href="mod-r-loops-cond.html#cb329-4"></a>      <span class="cf">if</span> (i<span class="op">&gt;</span>j) {distanceMat[i,j] &lt;-<span class="st"> </span>distanceMat[j,i]; <span class="cf">next</span>}   <span class="co"># assume symmetric distances</span></span>
<span id="cb329-5"><a href="mod-r-loops-cond.html#cb329-5"></a>      <span class="cf">if</span> (<span class="op">!</span><span class="kw">is.na</span>(distanceMat[i,j])) <span class="cf">next</span>   <span class="co"># value already calculated </span></span>
<span id="cb329-6"><a href="mod-r-loops-cond.html#cb329-6"></a>      <span class="cf">if</span> (i<span class="op">==</span>j) {distanceMat[i,j] &lt;-<span class="st"> </span><span class="dv">0</span>; <span class="cf">next</span>}</span>
<span id="cb329-7"><a href="mod-r-loops-cond.html#cb329-7"></a>      </span>
<span id="cb329-8"><a href="mod-r-loops-cond.html#cb329-8"></a>      url &lt;-<span class="st"> </span><span class="kw">str_c</span>(<span class="st">&quot;http://dev.virtualearth.net/REST/V1/Routes/Driving?wp.0=&quot;</span>,</span>
<span id="cb329-9"><a href="mod-r-loops-cond.html#cb329-9"></a>                   dat<span class="op">$</span>Zip[i], <span class="st">&quot;,Denmark&quot;</span>,</span>
<span id="cb329-10"><a href="mod-r-loops-cond.html#cb329-10"></a>                   <span class="st">&quot;&amp;wp.1=&quot;</span>,</span>
<span id="cb329-11"><a href="mod-r-loops-cond.html#cb329-11"></a>                   dat<span class="op">$</span>Zip[j], <span class="st">&quot;,Denmark&quot;</span>,</span>
<span id="cb329-12"><a href="mod-r-loops-cond.html#cb329-12"></a>                   <span class="st">&quot;&amp;avoid=minimizeTolls&amp;key=&quot;</span>, key)</span>
<span id="cb329-13"><a href="mod-r-loops-cond.html#cb329-13"></a>      lst &lt;-<span class="st"> </span>jsonlite<span class="op">::</span><span class="kw">fromJSON</span>(url)</span>
<span id="cb329-14"><a href="mod-r-loops-cond.html#cb329-14"></a>      <span class="cf">if</span> (lst<span class="op">$</span>statusCode <span class="op">==</span><span class="st"> </span><span class="dv">200</span>) {</span>
<span id="cb329-15"><a href="mod-r-loops-cond.html#cb329-15"></a>         distanceMat[i,j] &lt;-<span class="st"> </span>lst<span class="op">$</span>resourceSets<span class="op">$</span>resources[[<span class="dv">1</span>]]<span class="op">$</span>travelDistance</span>
<span id="cb329-16"><a href="mod-r-loops-cond.html#cb329-16"></a>      }</span>
<span id="cb329-17"><a href="mod-r-loops-cond.html#cb329-17"></a>   }</span>
<span id="cb329-18"><a href="mod-r-loops-cond.html#cb329-18"></a>}</span>
<span id="cb329-19"><a href="mod-r-loops-cond.html#cb329-19"></a>distanceMat</span>
<span id="cb329-20"><a href="mod-r-loops-cond.html#cb329-20"></a><span class="co">#&gt;                    5320 Agedrup 6753 Agerb\xe6k 6534 Agerskov 8961 Alling\xe5bro 6051 Almind</span></span>
<span id="cb329-21"><a href="mod-r-loops-cond.html#cb329-21"></a><span class="co">#&gt; 5320 Agedrup                0.0           137.7         142.2                215        86.2</span></span>
<span id="cb329-22"><a href="mod-r-loops-cond.html#cb329-22"></a><span class="co">#&gt; 6753 Agerb\xe6k           137.7             0.0         107.0                180        61.3</span></span>
<span id="cb329-23"><a href="mod-r-loops-cond.html#cb329-23"></a><span class="co">#&gt; 6534 Agerskov             142.2           107.0           0.0                204        65.6</span></span>
<span id="cb329-24"><a href="mod-r-loops-cond.html#cb329-24"></a><span class="co">#&gt; 8961 Alling\xe5bro        215.2           180.4         204.3                  0       150.8</span></span>
<span id="cb329-25"><a href="mod-r-loops-cond.html#cb329-25"></a><span class="co">#&gt; 6051 Almind                86.2            61.3          65.6                151         0.0</span></span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#2lKYfH3Qbyy5UOOJgHOz">
Solution
</button>
<div id="nJoDVA7t5rH1mM1k1QFU" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="nJoDVA7t5rH1mM1k1QFU-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="nJoDVA7t5rH1mM1k1QFU-title">
Hint
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb330"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb330-1"><a href="mod-r-loops-cond.html#cb330-1"></a>key &lt;-<span class="st"> &quot;AlUJdApmvPe8y2_IMrC4j4x8fzytbD2M0SvlmpemL09ae_CWS6-IuNSgrAtXoyeP&quot;</span></span>
<span id="cb330-2"><a href="mod-r-loops-cond.html#cb330-2"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(distanceMat)) {</span>
<span id="cb330-3"><a href="mod-r-loops-cond.html#cb330-3"></a>   <span class="cf">for</span>(j <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">ncol</span>(___)) {</span>
<span id="cb330-4"><a href="mod-r-loops-cond.html#cb330-4"></a>      <span class="cf">if</span> (i<span class="op">&gt;</span>j) {distanceMat[i,j] &lt;-<span class="st"> </span>___; <span class="cf">next</span>}   <span class="co"># assume symmetric distances</span></span>
<span id="cb330-5"><a href="mod-r-loops-cond.html#cb330-5"></a>      <span class="cf">if</span> (<span class="op">!</span><span class="kw">is.na</span>(distanceMat[i,j])) <span class="cf">next</span>   <span class="co"># value already calculated </span></span>
<span id="cb330-6"><a href="mod-r-loops-cond.html#cb330-6"></a>      <span class="cf">if</span> (i<span class="op">==</span>j) {distanceMat[i,j] &lt;-<span class="st"> </span>___; <span class="cf">next</span>}</span>
<span id="cb330-7"><a href="mod-r-loops-cond.html#cb330-7"></a>      </span>
<span id="cb330-8"><a href="mod-r-loops-cond.html#cb330-8"></a>      url &lt;-<span class="st"> </span><span class="kw">str_c</span>(<span class="st">&quot;http://dev.virtualearth.net/REST/V1/Routes/Driving?wp.0=&quot;</span>,</span>
<span id="cb330-9"><a href="mod-r-loops-cond.html#cb330-9"></a>                   dat<span class="op">$</span>Zip[i], <span class="st">&quot;,Denmark&quot;</span>,</span>
<span id="cb330-10"><a href="mod-r-loops-cond.html#cb330-10"></a>                   <span class="st">&quot;&amp;wp.1=&quot;</span>,</span>
<span id="cb330-11"><a href="mod-r-loops-cond.html#cb330-11"></a>                   dat<span class="op">$</span>Zip[j], <span class="st">&quot;,Denmark&quot;</span>,</span>
<span id="cb330-12"><a href="mod-r-loops-cond.html#cb330-12"></a>                   <span class="st">&quot;&amp;avoid=minimizeTolls&amp;key=&quot;</span>, key)</span>
<span id="cb330-13"><a href="mod-r-loops-cond.html#cb330-13"></a>      lst &lt;-<span class="st"> </span>jsonlite<span class="op">::</span><span class="kw">fromJSON</span>(url)</span>
<span id="cb330-14"><a href="mod-r-loops-cond.html#cb330-14"></a>      <span class="cf">if</span> (lst<span class="op">$</span>statusCode <span class="op">==</span><span class="st"> </span>___) {</span>
<span id="cb330-15"><a href="mod-r-loops-cond.html#cb330-15"></a>         distanceMat[i,j] &lt;-<span class="st"> </span>___</span>
<span id="cb330-16"><a href="mod-r-loops-cond.html#cb330-16"></a>      }</span>
<span id="cb330-17"><a href="mod-r-loops-cond.html#cb330-17"></a>   }</span>
<span id="cb330-18"><a href="mod-r-loops-cond.html#cb330-18"></a>}</span>
<span id="cb330-19"><a href="mod-r-loops-cond.html#cb330-19"></a>distanceMat</span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#nJoDVA7t5rH1mM1k1QFU">
Hint
</button>
<p>Use nested for loops to fill <code>distanceMat</code> with distances. Assume that the distance from a to b is the same as from b to a. That is, you only have to call the API once for two zip codes. Use an if statement to check if the status code is okay.</p>
</div>
<div id="ex-r-expand" class="section level3 hasAnchor">
<h3><span class="header-section-number">9.5.5</span> Exercise (expand_grid)<a href="mod-r-loops-cond.html#ex-r-expand" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="e5B6ocdOQLnseaK4aBjI" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="e5B6ocdOQLnseaK4aBjI-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="e5B6ocdOQLnseaK4aBjI-title">
Solution
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb331"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb331-1"><a href="mod-r-loops-cond.html#cb331-1"></a>ite &lt;-<span class="st"> </span><span class="kw">expand_grid</span>(<span class="dt">i =</span> <span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">5</span>), <span class="dt">j =</span> <span class="dv">2</span><span class="op">:</span><span class="dv">3</span>)</span>
<span id="cb331-2"><a href="mod-r-loops-cond.html#cb331-2"></a>ite</span>
<span id="cb331-3"><a href="mod-r-loops-cond.html#cb331-3"></a><span class="co">#&gt; # A tibble: 4 × 2</span></span>
<span id="cb331-4"><a href="mod-r-loops-cond.html#cb331-4"></a><span class="co">#&gt;       i     j</span></span>
<span id="cb331-5"><a href="mod-r-loops-cond.html#cb331-5"></a><span class="co">#&gt;   &lt;dbl&gt; &lt;int&gt;</span></span>
<span id="cb331-6"><a href="mod-r-loops-cond.html#cb331-6"></a><span class="co">#&gt; 1     1     2</span></span>
<span id="cb331-7"><a href="mod-r-loops-cond.html#cb331-7"></a><span class="co">#&gt; 2     1     3</span></span>
<span id="cb331-8"><a href="mod-r-loops-cond.html#cb331-8"></a><span class="co">#&gt; 3     5     2</span></span>
<span id="cb331-9"><a href="mod-r-loops-cond.html#cb331-9"></a><span class="co">#&gt; 4     5     3</span></span>
<span id="cb331-10"><a href="mod-r-loops-cond.html#cb331-10"></a>key &lt;-<span class="st"> &quot;AlUJdApmvPe8y2_IMrC4j4x8fzytbD2M0SvlmpemL09ae_CWS6-IuNSgrAtXoyeP&quot;</span></span>
<span id="cb331-11"><a href="mod-r-loops-cond.html#cb331-11"></a><span class="cf">for</span> (r <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(ite)) { <span class="co"># iterate over rows</span></span>
<span id="cb331-12"><a href="mod-r-loops-cond.html#cb331-12"></a>   i &lt;-<span class="st"> </span>ite<span class="op">$</span>i[r]</span>
<span id="cb331-13"><a href="mod-r-loops-cond.html#cb331-13"></a>   j &lt;-<span class="st"> </span>ite<span class="op">$</span>j[r]</span>
<span id="cb331-14"><a href="mod-r-loops-cond.html#cb331-14"></a>   <span class="cf">if</span> (i<span class="op">==</span>j) {distanceMat[i,j] &lt;-<span class="st"> </span><span class="dv">0</span>; <span class="cf">next</span>}</span>
<span id="cb331-15"><a href="mod-r-loops-cond.html#cb331-15"></a>   url &lt;-<span class="st"> </span><span class="kw">str_c</span>(<span class="st">&quot;http://dev.virtualearth.net/REST/V1/Routes/Driving?wp.0=&quot;</span>,</span>
<span id="cb331-16"><a href="mod-r-loops-cond.html#cb331-16"></a>                dat<span class="op">$</span>Zip[i], <span class="st">&quot;,Denmark&quot;</span>,</span>
<span id="cb331-17"><a href="mod-r-loops-cond.html#cb331-17"></a>                <span class="st">&quot;&amp;wp.1=&quot;</span>,</span>
<span id="cb331-18"><a href="mod-r-loops-cond.html#cb331-18"></a>                dat<span class="op">$</span>Zip[j], <span class="st">&quot;,Denmark&quot;</span>,</span>
<span id="cb331-19"><a href="mod-r-loops-cond.html#cb331-19"></a>                <span class="st">&quot;&amp;avoid=minimizeTolls&amp;key=&quot;</span>, key)</span>
<span id="cb331-20"><a href="mod-r-loops-cond.html#cb331-20"></a>   lst &lt;-<span class="st"> </span>jsonlite<span class="op">::</span><span class="kw">fromJSON</span>(url)</span>
<span id="cb331-21"><a href="mod-r-loops-cond.html#cb331-21"></a>   <span class="cf">if</span> (lst<span class="op">$</span>statusCode <span class="op">==</span><span class="st"> </span><span class="dv">200</span>) {</span>
<span id="cb331-22"><a href="mod-r-loops-cond.html#cb331-22"></a>      distanceMat[i,j] &lt;-<span class="st"> </span>lst<span class="op">$</span>resourceSets<span class="op">$</span>resources[[<span class="dv">1</span>]]<span class="op">$</span>travelDistance</span>
<span id="cb331-23"><a href="mod-r-loops-cond.html#cb331-23"></a>      distanceMat[j,i] &lt;-<span class="st"> </span>distanceMat[i,j]</span>
<span id="cb331-24"><a href="mod-r-loops-cond.html#cb331-24"></a>   }</span>
<span id="cb331-25"><a href="mod-r-loops-cond.html#cb331-25"></a>}</span>
<span id="cb331-26"><a href="mod-r-loops-cond.html#cb331-26"></a>distanceMat</span>
<span id="cb331-27"><a href="mod-r-loops-cond.html#cb331-27"></a><span class="co">#&gt;                    5320 Agedrup 6753 Agerb\xe6k 6534 Agerskov 8961 Alling\xe5bro 6051 Almind</span></span>
<span id="cb331-28"><a href="mod-r-loops-cond.html#cb331-28"></a><span class="co">#&gt; 5320 Agedrup                0.0           137.7         142.2                215        86.2</span></span>
<span id="cb331-29"><a href="mod-r-loops-cond.html#cb331-29"></a><span class="co">#&gt; 6753 Agerb\xe6k           137.7             0.0         107.0                180        58.8</span></span>
<span id="cb331-30"><a href="mod-r-loops-cond.html#cb331-30"></a><span class="co">#&gt; 6534 Agerskov             142.2           107.0           0.0                204        62.4</span></span>
<span id="cb331-31"><a href="mod-r-loops-cond.html#cb331-31"></a><span class="co">#&gt; 8961 Alling\xe5bro        215.2           180.4         204.3                  0       150.8</span></span>
<span id="cb331-32"><a href="mod-r-loops-cond.html#cb331-32"></a><span class="co">#&gt; 6051 Almind                86.2            58.8          62.4                151         0.0</span></span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#e5B6ocdOQLnseaK4aBjI">
Solution
</button>
<div id="d7Fon2s7bTYjTzzObLRE" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="d7Fon2s7bTYjTzzObLRE-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="d7Fon2s7bTYjTzzObLRE-title">
Hint
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb332"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb332-1"><a href="mod-r-loops-cond.html#cb332-1"></a>ite &lt;-<span class="st"> </span><span class="kw">expand_grid</span>(<span class="dt">i =</span> ___, <span class="dt">j =</span> ___)</span>
<span id="cb332-2"><a href="mod-r-loops-cond.html#cb332-2"></a>ite</span>
<span id="cb332-3"><a href="mod-r-loops-cond.html#cb332-3"></a>key &lt;-<span class="st"> &quot;AlUJdApmvPe8y2_IMrC4j4x8fzytbD2M0SvlmpemL09ae_CWS6-IuNSgrAtXoyeP&quot;</span></span>
<span id="cb332-4"><a href="mod-r-loops-cond.html#cb332-4"></a><span class="cf">for</span> (r <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(ite)) { <span class="co"># iterate over rows</span></span>
<span id="cb332-5"><a href="mod-r-loops-cond.html#cb332-5"></a>   i &lt;-<span class="st"> </span>ite<span class="op">$</span>i[r]</span>
<span id="cb332-6"><a href="mod-r-loops-cond.html#cb332-6"></a>   j &lt;-<span class="st"> </span>ite<span class="op">$</span>j[r]</span>
<span id="cb332-7"><a href="mod-r-loops-cond.html#cb332-7"></a>   <span class="cf">if</span> (i<span class="op">==</span>j) {distanceMat[i,j] &lt;-<span class="st"> </span><span class="dv">0</span>; <span class="cf">next</span>}</span>
<span id="cb332-8"><a href="mod-r-loops-cond.html#cb332-8"></a>   url &lt;-<span class="st"> </span><span class="kw">str_c</span>(<span class="st">&quot;http://dev.virtualearth.net/REST/V1/Routes/Driving?wp.0=&quot;</span>,</span>
<span id="cb332-9"><a href="mod-r-loops-cond.html#cb332-9"></a>                dat<span class="op">$</span>Zip[i], <span class="st">&quot;,Denmark&quot;</span>,</span>
<span id="cb332-10"><a href="mod-r-loops-cond.html#cb332-10"></a>                <span class="st">&quot;&amp;wp.1=&quot;</span>,</span>
<span id="cb332-11"><a href="mod-r-loops-cond.html#cb332-11"></a>                dat<span class="op">$</span>Zip[j], <span class="st">&quot;,Denmark&quot;</span>,</span>
<span id="cb332-12"><a href="mod-r-loops-cond.html#cb332-12"></a>                <span class="st">&quot;&amp;avoid=minimizeTolls&amp;key=&quot;</span>, key)</span>
<span id="cb332-13"><a href="mod-r-loops-cond.html#cb332-13"></a>   lst &lt;-<span class="st"> </span>jsonlite<span class="op">::</span><span class="kw">fromJSON</span>(url)</span>
<span id="cb332-14"><a href="mod-r-loops-cond.html#cb332-14"></a>   <span class="cf">if</span> (lst<span class="op">$</span>statusCode <span class="op">==</span><span class="st"> </span>___) {</span>
<span id="cb332-15"><a href="mod-r-loops-cond.html#cb332-15"></a>      distanceMat[i,j] &lt;-<span class="st"> </span>lst<span class="op">$</span>resourceSets<span class="op">$</span>resources[[<span class="dv">1</span>]]<span class="op">$</span>travelDistance</span>
<span id="cb332-16"><a href="mod-r-loops-cond.html#cb332-16"></a>      distanceMat[j,i] &lt;-<span class="st"> </span>___</span>
<span id="cb332-17"><a href="mod-r-loops-cond.html#cb332-17"></a>   }</span>
<span id="cb332-18"><a href="mod-r-loops-cond.html#cb332-18"></a>}</span>
<span id="cb332-19"><a href="mod-r-loops-cond.html#cb332-19"></a>distanceMat</span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#d7Fon2s7bTYjTzzObLRE">
Hint
</button>
<p>Consider the solution of Exercise <a href="mod-r-loops-cond.html#ex-dist">9.5.4</a> and assume that you only want to calculate the distance from rows 1 and 5 to rows 2 and 3 in <code>dat</code>. Modify the solution using <code>expand_grid</code> so only one loop is used.</p>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="mod-r-workflow.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="mod-r-functions.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": false,
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/bss-osca/tfa/edit/master/book/09_r-loops-cond.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
